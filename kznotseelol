if KRXL == true then
error("Running Aready!",0)
return
end

pcall(function() getgenv().KRXL = true end)
-- wlwoekdisis
while not game:IsLoaded() or not game:GetService("CoreGui") or not game:GetService("Players").LocalPlayer or not game:GetService("Players").LocalPlayer.PlayerGui do wait() end

function notify(msg)
local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()
 
OrionLib:MakeNotification({
    Name = "Krunox",
    Content = msg,
    Image = "rbxassetid://12862385552",
    Time = 4
})
OrionLib:Init()
end

-- Setup
local players = game.Players
local plr = game:GetService("Players").LocalPlayer
local plrgui = plr.PlayerGui
mouse = plr:GetMouse()
local uis = game:GetService("UserInputService")
cbringall = false
anniblockspam = false
nowe = false


local function tpall()
for i, player in ipairs(game:GetService("Players"):GetPlayers()) do
if player.Character and player.Character:FindFirstChild("HumanoidRootPart")then 
player.Character.HumanoidRootPart.CFrame = plr.Character.HumanoidRootPart.CFrame + plr.Character.HumanoidRootPart.CFrame.lookVector * 1
end
end
end

spawn(function()
while wait() do
if cbringall == true then
tpall()
end
end
end)

function rhumanoid()
local hum = plr.Character:FindFirstChildOfClass("Humanoid")
hum.Name = "1"
local newHum = hum:Clone()
newHum.Parent = plr.Character
newHum.Name = "Humanoid"
wait()
hum:Destroy()
workspace.CurrentCamera.CameraSubject = plr.Character
newHum.DisplayDistanceType = "None"
end

function refreshplr()
savedpos = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart").CFrame
plr.Character.Humanoid.Health = "0"
plr.Character:Destroy()
plr.CharacterAdded:Wait():WaitForChild("HumanoidRootPart").CFrame = savedpos
end

game:GetService('RunService').Stepped:connect(function()
if anniblockspam then
game.workspace.Tools.Chest_Invisibility_Cloak.Part.CFrame = CFrame.new(plr.Character.HumanoidRootPart.Position)

if plr.Backpack:FindFirstChild("InvisibilityCloak") then
plr.Character.Humanoid:EquipTool(plr.Backpack.InvisibilityCloak)
else
end

if plr.Character.InvisibilityCloak.Handle:FindFirstChild("Mesh") then
plr.Character:FindFirstChild("InvisibilityCloak").Handle.Mesh:Destroy()
else
end
plr.Character.InvisibilityCloak.Parent = workspace

end
end)


local function gplr(String)
local Found = {}
local strl = String:lower()
if strl == "all" then
for i,v in pairs(game:FindService("Players"):GetPlayers()) do
table.insert(Found,v)
end
elseif strl == "others" then
for i,v in pairs(game:FindService("Players"):GetPlayers()) do
if v.Name ~= plr.Name then
table.insert(Found,v)
end
end 
elseif strl == "me" then
for i,v in pairs(game:FindService("Players"):GetPlayers()) do
if v.Name == plr.Name then
table.insert(Found,v)
end
end 
else
for i,v in pairs(game:FindService("Players"):GetPlayers()) do
if v.Name:lower():sub(1, #String) == String:lower() or v.DisplayName:lower():sub(1, #String) == String:lower() then
table.insert(Found,v)
end
end 
end
return Found 
end


local ScriptBloxSearcher = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local UICorner = Instance.new("UICorner")
local TopBarFrame = Instance.new("Frame")
local UICorner_2 = Instance.new("UICorner")
local SearchBox = Instance.new("TextBox")
local UICorner_3 = Instance.new("UICorner")
local Title = Instance.new("TextLabel")
local CloseButton = Instance.new("ImageButton")
local UICorner_4 = Instance.new("UICorner")
local ClearCacheButton = Instance.new("TextButton")
local UICorner_5 = Instance.new("UICorner")
local TopbarBottomCover = Instance.new("Frame")
local ScriptListFrame = Instance.new("ScrollingFrame")
local UIPadding = Instance.new("UIPadding")
local Scripts = Instance.new("Folder")
local UIGridLayout = Instance.new("UIGridLayout")
local ScriptFrame = Instance.new("Frame")
local UICorner_6 = Instance.new("UICorner")
local ScriptTitle = Instance.new("TextLabel")
local ExecuteButton = Instance.new("TextButton")
local UICorner_7 = Instance.new("UICorner")
local InfoButton = Instance.new("TextButton")
local UICorner_8 = Instance.new("UICorner")
local ScriptAuthor = Instance.new("TextLabel")
local ScriptGame = Instance.new("TextLabel")
local VerifiedScriptFrame = Instance.new("Frame")
local UICorner_9 = Instance.new("UICorner")
local ScriptTitle_2 = Instance.new("TextLabel")
local VerifiedIcon = Instance.new("ImageLabel")
local ExecuteButton_2 = Instance.new("TextButton")
local UICorner_10 = Instance.new("UICorner")
local InfoButton_2 = Instance.new("TextButton")
local UICorner_11 = Instance.new("UICorner")
local ScriptAuthor_2 = Instance.new("TextLabel")
local ScriptGame_2 = Instance.new("TextLabel")
local ScriptListBackgroundFrame = Instance.new("Frame")
local UICorner_12 = Instance.new("UICorner")
local NoScriptsFound = Instance.new("TextLabel")
local InfoBox = Instance.new("ScrollingFrame")
local UIListLayout = Instance.new("UIListLayout")
local UICorner_13 = Instance.new("UICorner")
local Info = Instance.new("Frame")
local PreviewImage = Instance.new("ImageLabel")
local UIScale = Instance.new("UIScale")
local UICorner_14 = Instance.new("UICorner")
local Author = Instance.new("Frame")
local InfoBoxAuthor = Instance.new("TextLabel")
local ProfilePicture = Instance.new("ImageLabel")
local UICorner_15 = Instance.new("UICorner")
local Title_2 = Instance.new("Frame")
local InfoBoxTitle = Instance.new("TextLabel")
local Game = Instance.new("TextLabel")
local Buttons = Instance.new("Frame")
local UIListLayout_2 = Instance.new("UIListLayout")
local Close = Instance.new("TextButton")
local UICorner_16 = Instance.new("UICorner")
local CopyScriptBloxLink = Instance.new("TextButton")
local UICorner_17 = Instance.new("UICorner")
local CopyScriptButton = Instance.new("TextButton")
local UICorner_18 = Instance.new("UICorner")
local ExecuteButton_3 = Instance.new("TextButton")
local UICorner_19 = Instance.new("UICorner")
local InfoBoxDescription = Instance.new("TextLabel")
local Comments = Instance.new("Frame")
local UICorner_20 = Instance.new("UICorner")
local Inner = Instance.new("Frame")
local UICorner_21 = Instance.new("UICorner")
local Line = Instance.new("Frame")
local CommentsText = Instance.new("TextLabel")
local Comments_2 = Instance.new("ScrollingFrame")
local Comment = Instance.new("Frame")
local Content = Instance.new("TextLabel")
local Author_2 = Instance.new("TextLabel")
local ProfilePicture_2 = Instance.new("ImageLabel")
local UICorner_22 = Instance.new("UICorner")
local UIListLayout_3 = Instance.new("UIListLayout")

ScriptBloxSearcher.Name = "ScriptBloxSearcher"
ScriptBloxSearcher.Parent = game:GetService("CoreGui")
ScriptBloxSearcher.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScriptBloxSearcher.ResetOnSpawn = false
ScriptBloxSearcher.Enabled = false

MainFrame.Name = "MainFrame"
MainFrame.Parent = ScriptBloxSearcher
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
MainFrame.Size = UDim2.new(0, 378, 0, 250)
MainFrame.ZIndex = 2

UIAspectRatioConstraint.Parent = MainFrame
UIAspectRatioConstraint.AspectRatio = 1.778

UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = MainFrame

TopBarFrame.Name = "TopBarFrame"
TopBarFrame.Parent = MainFrame
TopBarFrame.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
TopBarFrame.Size = UDim2.new(0, 378, 0, 300)
TopBarFrame.ZIndex = 2

UICorner_2.CornerRadius = UDim.new(0, 12)
UICorner_2.Parent = TopBarFrame

SearchBox.Name = "SearchBox"
SearchBox.Parent = TopBarFrame
SearchBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
SearchBox.Position = UDim2.new(0, 5, 0, 5)
SearchBox.Size = UDim2.new(0, 220, 0, 30)
SearchBox.ClearTextOnFocus = false
SearchBox.Font = Enum.Font.Gotham
SearchBox.PlaceholderText = "Search"
SearchBox.Text = ""
SearchBox.TextColor3 = Color3.fromRGB(0, 0, 0)
SearchBox.TextScaled = true
SearchBox.TextSize = 14.000
SearchBox.TextWrapped = true

UICorner_3.CornerRadius = UDim.new(0, 12)
UICorner_3.Parent = SearchBox

Title.Name = "Title"
Title.Parent = TopBarFrame
Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1.000
Title.Size = UDim2.new(0, 101, 0, 40)
Title.Font = Enum.Font.Gotham
Title.Text = "<font color=\"#8C7DFF\">Script</font>Blox"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 28.000

CloseButton.Name = "CloseButton"
CloseButton.Parent = TopBarFrame
CloseButton.BackgroundColor3 = Color3.fromRGB(214, 21, 24)
CloseButton.Position = UDim2.new(0, 340, 0, 5)
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.AutoButtonColor = false
CloseButton.Image = "rbxassetid://54479706"

UICorner_4.CornerRadius = UDim.new(0, 12)
UICorner_4.Parent = CloseButton

ClearCacheButton.Name = "ClearCacheButton"
ClearCacheButton.Parent = TopBarFrame
ClearCacheButton.BackgroundColor3 = Color3.fromRGB(39, 48, 88)
ClearCacheButton.Position = UDim2.new(0, 231, 0, 5)
ClearCacheButton.Size = UDim2.new(0, 100, 0, 30)
ClearCacheButton.AutoButtonColor = false
ClearCacheButton.Font = Enum.Font.GothamSemibold
ClearCacheButton.Text = "Clear Cache"
ClearCacheButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ClearCacheButton.TextSize = 24.000
ClearCacheButton.TextWrapped = true

UICorner_5.CornerRadius = UDim.new(0, 12)
UICorner_5.Parent = ClearCacheButton

TopbarBottomCover.Name = "TopbarBottomCover"
TopbarBottomCover.Parent = MainFrame
TopbarBottomCover.BackgroundColor3 = Color3.fromRGB(13, 18, 39)
TopbarBottomCover.BorderSizePixel = 0
TopbarBottomCover.LayoutOrder = 1
TopbarBottomCover.Position = UDim2.new(3.0063287e-08, 0, 0.0437828377, 0)
TopbarBottomCover.Size = UDim2.new(0, 378, 0, 15)
TopbarBottomCover.Visible = false

ScriptListFrame.Name = "ScriptListFrame"
ScriptListFrame.Parent = MainFrame
ScriptListFrame.Active = true
ScriptListFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ScriptListFrame.BackgroundTransparency = 1.000
ScriptListFrame.BorderSizePixel = 0
ScriptListFrame.Position = UDim2.new(0, 10, 0.0700000003, 10)
ScriptListFrame.Size = UDim2.new(0, 378, 0, 250)
ScriptListFrame.ZIndex = 2
ScriptListFrame.CanvasSize = UDim2.new(0, 0, 0, 0)

UIPadding.Parent = ScriptListFrame
UIPadding.PaddingBottom = UDim.new(0, 10)
UIPadding.PaddingLeft = UDim.new(0, 25)
UIPadding.PaddingRight = UDim.new(0, 25)
UIPadding.PaddingTop = UDim.new(0, 10)

Scripts.Name = "Scripts"
Scripts.Parent = ScriptListFrame

UIGridLayout.Parent = Scripts
UIGridLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIGridLayout.CellPadding = UDim2.new(0, 20, 0, 20)
UIGridLayout.CellSize = UDim2.new(0, 300, 0, 150)

ScriptFrame.Name = "ScriptFrame"
ScriptFrame.Parent = Scripts
ScriptFrame.BackgroundColor3 = Color3.fromRGB(11, 11, 11)
ScriptFrame.Size = UDim2.new(0, 300, 0, 150)

UICorner_6.CornerRadius = UDim.new(0, 12)
UICorner_6.Parent = ScriptFrame

ScriptTitle.Name = "ScriptTitle"
ScriptTitle.Parent = ScriptFrame
ScriptTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ScriptTitle.BackgroundTransparency = 1.000
ScriptTitle.Position = UDim2.new(0, 10, 0, 10)
ScriptTitle.Size = UDim2.new(0, 280, 0, 40)
ScriptTitle.Font = Enum.Font.Gotham
ScriptTitle.Text = "Script Title"
ScriptTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
ScriptTitle.TextScaled = true
ScriptTitle.TextSize = 14.000
ScriptTitle.TextWrapped = true
ScriptTitle.TextXAlignment = Enum.TextXAlignment.Left

ExecuteButton.Name = "ExecuteButton"
ExecuteButton.Parent = ScriptFrame
ExecuteButton.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
ExecuteButton.Position = UDim2.new(0.0399999991, 0, 0.733333349, 0)
ExecuteButton.Size = UDim2.new(0, 130, 0, 30)
ExecuteButton.AutoButtonColor = false
ExecuteButton.Font = Enum.Font.GothamBold
ExecuteButton.Text = "Execute"
ExecuteButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ExecuteButton.TextSize = 14.000

UICorner_7.CornerRadius = UDim.new(0, 12)
UICorner_7.Parent = ExecuteButton

InfoButton.Name = "InfoButton"
InfoButton.Parent = ScriptFrame
InfoButton.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
InfoButton.Position = UDim2.new(0.533333361, 0, 0.733333349, 0)
InfoButton.Size = UDim2.new(0, 130, 0, 30)
InfoButton.AutoButtonColor = false
InfoButton.Font = Enum.Font.GothamBold
InfoButton.Text = "Info"
InfoButton.TextColor3 = Color3.fromRGB(255, 255, 255)
InfoButton.TextSize = 14.000

UICorner_8.CornerRadius = UDim.new(0, 12)
UICorner_8.Parent = InfoButton

ScriptAuthor.Name = "ScriptAuthor"
ScriptAuthor.Parent = ScriptFrame
ScriptAuthor.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ScriptAuthor.BackgroundTransparency = 1.000
ScriptAuthor.Position = UDim2.new(0, 10, 0, 55)
ScriptAuthor.Size = UDim2.new(0, 280, 0, 25)
ScriptAuthor.Font = Enum.Font.Gotham
ScriptAuthor.Text = "by ScriptAuthor"
ScriptAuthor.TextColor3 = Color3.fromRGB(192, 192, 192)
ScriptAuthor.TextSize = 14.000
ScriptAuthor.TextWrapped = true
ScriptAuthor.TextXAlignment = Enum.TextXAlignment.Left

ScriptGame.Name = "ScriptGame"
ScriptGame.Parent = ScriptFrame
ScriptGame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ScriptGame.BackgroundTransparency = 1.000
ScriptGame.Position = UDim2.new(0, 10, 0, 80)
ScriptGame.Size = UDim2.new(0, 280, 0, 25)
ScriptGame.Font = Enum.Font.Gotham
ScriptGame.Text = "Game"
ScriptGame.TextColor3 = Color3.fromRGB(192, 192, 192)
ScriptGame.TextSize = 14.000
ScriptGame.TextWrapped = true
ScriptGame.TextXAlignment = Enum.TextXAlignment.Left

VerifiedScriptFrame.Name = "VerifiedScriptFrame"
VerifiedScriptFrame.Parent = Scripts
VerifiedScriptFrame.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
VerifiedScriptFrame.Size = UDim2.new(0, 300, 0, 150)

UICorner_9.CornerRadius = UDim.new(0, 12)
UICorner_9.Parent = VerifiedScriptFrame

ScriptTitle_2.Name = "ScriptTitle"
ScriptTitle_2.Parent = VerifiedScriptFrame
ScriptTitle_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ScriptTitle_2.BackgroundTransparency = 1.000
ScriptTitle_2.Position = UDim2.new(0, 50, 0, 10)
ScriptTitle_2.Size = UDim2.new(0, 240, 0, 40)
ScriptTitle_2.Font = Enum.Font.Gotham
ScriptTitle_2.Text = "Script Title"
ScriptTitle_2.TextColor3 = Color3.fromRGB(255, 255, 255)
ScriptTitle_2.TextScaled = true
ScriptTitle_2.TextSize = 14.000
ScriptTitle_2.TextWrapped = true
ScriptTitle_2.TextXAlignment = Enum.TextXAlignment.Left

VerifiedIcon.Name = "VerifiedIcon"
VerifiedIcon.Parent = VerifiedScriptFrame
VerifiedIcon.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
VerifiedIcon.BackgroundTransparency = 1.000
VerifiedIcon.Position = UDim2.new(0, 10, 0, 15)
VerifiedIcon.Size = UDim2.new(0, 30, 0, 30)
VerifiedIcon.Image = "rbxassetid://8240362117"

ExecuteButton_2.Name = "ExecuteButton"
ExecuteButton_2.Parent = VerifiedScriptFrame
ExecuteButton_2.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
ExecuteButton_2.Position = UDim2.new(0.0399999991, 0, 0.733333349, 0)
ExecuteButton_2.Size = UDim2.new(0, 130, 0, 30)
ExecuteButton_2.AutoButtonColor = false
ExecuteButton_2.Font = Enum.Font.GothamBold
ExecuteButton_2.Text = "Execute"
ExecuteButton_2.TextColor3 = Color3.fromRGB(255, 255, 255)
ExecuteButton_2.TextSize = 14.000

UICorner_10.CornerRadius = UDim.new(0, 12)
UICorner_10.Parent = ExecuteButton_2

InfoButton_2.Name = "InfoButton"
InfoButton_2.Parent = VerifiedScriptFrame
InfoButton_2.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
InfoButton_2.Position = UDim2.new(0.533333361, 0, 0.733333349, 0)
InfoButton_2.Size = UDim2.new(0, 130, 0, 30)
InfoButton_2.AutoButtonColor = false
InfoButton_2.Font = Enum.Font.GothamBold
InfoButton_2.Text = "Info"
InfoButton_2.TextColor3 = Color3.fromRGB(255, 255, 255)
InfoButton_2.TextSize = 14.000

UICorner_11.CornerRadius = UDim.new(0, 12)
UICorner_11.Parent = InfoButton_2

ScriptAuthor_2.Name = "ScriptAuthor"
ScriptAuthor_2.Parent = VerifiedScriptFrame
ScriptAuthor_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ScriptAuthor_2.BackgroundTransparency = 1.000
ScriptAuthor_2.Position = UDim2.new(0.0399999991, 0, 0.366666675, 0)
ScriptAuthor_2.Size = UDim2.new(0, 280, 0, 25)
ScriptAuthor_2.Font = Enum.Font.Gotham
ScriptAuthor_2.Text = "by ScriptAuthor"
ScriptAuthor_2.TextColor3 = Color3.fromRGB(192, 192, 192)
ScriptAuthor_2.TextSize = 14.000
ScriptAuthor_2.TextWrapped = true
ScriptAuthor_2.TextXAlignment = Enum.TextXAlignment.Left

ScriptGame_2.Name = "ScriptGame"
ScriptGame_2.Parent = VerifiedScriptFrame
ScriptGame_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ScriptGame_2.BackgroundTransparency = 1.000
ScriptGame_2.Position = UDim2.new(0, 10, 0, 80)
ScriptGame_2.Size = UDim2.new(0, 280, 0, 25)
ScriptGame_2.Font = Enum.Font.Gotham
ScriptGame_2.Text = "Game"
ScriptGame_2.TextColor3 = Color3.fromRGB(192, 192, 192)
ScriptGame_2.TextSize = 14.000
ScriptGame_2.TextWrapped = true
ScriptGame_2.TextXAlignment = Enum.TextXAlignment.Left

ScriptListBackgroundFrame.Name = "ScriptListBackgroundFrame"
ScriptListBackgroundFrame.Parent = MainFrame
ScriptListBackgroundFrame.BackgroundColor3 = Color3.fromRGB(13, 18, 39)
ScriptListBackgroundFrame.Position = UDim2.new(0, 10, 0.0700000003, 10)
ScriptListBackgroundFrame.Size = UDim2.new(0, 995, 0, 511)
ScriptListBackgroundFrame.Visible = false

UICorner_12.CornerRadius = UDim.new(0, 12)
UICorner_12.Parent = ScriptListBackgroundFrame

NoScriptsFound.Name = "No Scripts Found"
NoScriptsFound.Parent = MainFrame
NoScriptsFound.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
NoScriptsFound.BackgroundTransparency = 1.000
NoScriptsFound.Position = UDim2.new(3.0063287e-08, 10, 0.0700000003, 10)
NoScriptsFound.Size = UDim2.new(0, 995, 0, 509)
NoScriptsFound.Visible = false
NoScriptsFound.ZIndex = 3
NoScriptsFound.Font = Enum.Font.GothamSemibold
NoScriptsFound.Text = "No Scripts have been found!"
NoScriptsFound.TextColor3 = Color3.fromRGB(255, 0, 0)
NoScriptsFound.TextScaled = true
NoScriptsFound.TextSize = 100.000
NoScriptsFound.TextWrapped = true

InfoBox.Name = "InfoBox"
InfoBox.Parent = MainFrame
InfoBox.Active = true
InfoBox.BackgroundColor3 = Color3.fromRGB(13, 18, 39)
InfoBox.BorderSizePixel = 0
InfoBox.Position = UDim2.new(0, 10, 0, 50)
InfoBox.Size = UDim2.new(0, 378, 0, 250)
InfoBox.ZIndex = 3
InfoBox.CanvasSize = UDim2.new(2, 0, 1, 0)
InfoBox.VerticalScrollBarInset = Enum.ScrollBarInset.ScrollBar

UIListLayout.Parent = InfoBox
UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Padding = UDim.new(0, 10)

UICorner_13.CornerRadius = UDim.new(0, 12)
UICorner_13.Parent = InfoBox

Info.Name = "Info"
Info.Parent = InfoBox
Info.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Info.BackgroundTransparency = 1.000
Info.Size = UDim2.new(0, 995, 0, 207)

PreviewImage.Name = "PreviewImage"
PreviewImage.Parent = Info
PreviewImage.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
PreviewImage.BackgroundTransparency = 1.000
PreviewImage.Position = UDim2.new(0, 50, 0, 10)
PreviewImage.Size = UDim2.new(0, 480, 0, 270)
PreviewImage.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"

UIScale.Parent = PreviewImage
UIScale.Scale = 0.700

UICorner_14.CornerRadius = UDim.new(0, 24)
UICorner_14.Parent = PreviewImage

Author.Name = "Author"
Author.Parent = Info
Author.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Author.BackgroundTransparency = 1.000
Author.Position = UDim2.new(0, 395, 0, 110)
Author.Size = UDim2.new(0, 250, 0, 40)

InfoBoxAuthor.Name = "InfoBoxAuthor"
InfoBoxAuthor.Parent = Author
InfoBoxAuthor.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
InfoBoxAuthor.BackgroundTransparency = 1.000
InfoBoxAuthor.BorderSizePixel = 0
InfoBoxAuthor.Position = UDim2.new(0, 45, 0, 0)
InfoBoxAuthor.Size = UDim2.new(0, 150, 0, 40)
InfoBoxAuthor.Font = Enum.Font.Gotham
InfoBoxAuthor.Text = "Author"
InfoBoxAuthor.TextColor3 = Color3.fromRGB(140, 125, 233)
InfoBoxAuthor.TextSize = 20.000
InfoBoxAuthor.TextWrapped = true
InfoBoxAuthor.TextXAlignment = Enum.TextXAlignment.Left

ProfilePicture.Name = "ProfilePicture"
ProfilePicture.Parent = Author
ProfilePicture.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ProfilePicture.BackgroundTransparency = 1.000
ProfilePicture.Size = UDim2.new(0, 40, 0, 40)
ProfilePicture.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"

UICorner_15.CornerRadius = UDim.new(1, 0)
UICorner_15.Parent = ProfilePicture

Title_2.Name = "Title"
Title_2.Parent = Info
Title_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Title_2.BackgroundTransparency = 1.000
Title_2.Position = UDim2.new(0, 395, 0, 10)
Title_2.Size = UDim2.new(0, 550, 0, 50)

InfoBoxTitle.Name = "InfoBoxTitle"
InfoBoxTitle.Parent = Title_2
InfoBoxTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
InfoBoxTitle.BackgroundTransparency = 1.000
InfoBoxTitle.Size = UDim2.new(0, 550, 0, 50)
InfoBoxTitle.Font = Enum.Font.GothamSemibold
InfoBoxTitle.Text = "Script Title"
InfoBoxTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
InfoBoxTitle.TextScaled = true
InfoBoxTitle.TextSize = 14.000
InfoBoxTitle.TextWrapped = true
InfoBoxTitle.TextXAlignment = Enum.TextXAlignment.Left

Game.Name = "Game"
Game.Parent = Info
Game.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Game.BackgroundTransparency = 1.000
Game.Position = UDim2.new(0, 395, 0, 70)
Game.Size = UDim2.new(0, 250, 0, 25)
Game.Font = Enum.Font.Gotham
Game.Text = "Game Name"
Game.TextColor3 = Color3.fromRGB(255, 255, 255)
Game.TextSize = 22.000
Game.TextXAlignment = Enum.TextXAlignment.Left

Buttons.Name = "Buttons"
Buttons.Parent = InfoBox
Buttons.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Buttons.BackgroundTransparency = 1.000
Buttons.Position = UDim2.new(0.0100502511, 0, 0.911764622, 0)
Buttons.Size = UDim2.new(0, 975, 0, 35)

UIListLayout_2.Parent = Buttons
UIListLayout_2.FillDirection = Enum.FillDirection.Horizontal
UIListLayout_2.HorizontalAlignment = Enum.HorizontalAlignment.Center
UIListLayout_2.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout_2.VerticalAlignment = Enum.VerticalAlignment.Center
UIListLayout_2.Padding = UDim.new(0, 40)

Close.Name = "Close"
Close.Parent = Buttons
Close.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
Close.LayoutOrder = 3
Close.Position = UDim2.new(0, 735, 0, 465)
Close.Size = UDim2.new(0, 200, 0, 35)
Close.ZIndex = 2
Close.AutoButtonColor = false
Close.Font = Enum.Font.GothamBold
Close.Text = "Close"
Close.TextColor3 = Color3.fromRGB(255, 255, 255)
Close.TextSize = 14.000

UICorner_16.CornerRadius = UDim.new(0, 12)
UICorner_16.Parent = Close

CopyScriptBloxLink.Name = "CopyScriptBloxLink"
CopyScriptBloxLink.Parent = Buttons
CopyScriptBloxLink.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
CopyScriptBloxLink.LayoutOrder = 1
CopyScriptBloxLink.Position = UDim2.new(0, 505, 0, 465)
CopyScriptBloxLink.Size = UDim2.new(0, 200, 0, 35)
CopyScriptBloxLink.AutoButtonColor = false
CopyScriptBloxLink.Font = Enum.Font.GothamBold
CopyScriptBloxLink.Text = "Copy ScriptBlox Link"
CopyScriptBloxLink.TextColor3 = Color3.fromRGB(255, 255, 255)
CopyScriptBloxLink.TextSize = 14.000

UICorner_17.CornerRadius = UDim.new(0, 12)
UICorner_17.Parent = CopyScriptBloxLink

CopyScriptButton.Name = "CopyScriptButton"
CopyScriptButton.Parent = Buttons
CopyScriptButton.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
CopyScriptButton.LayoutOrder = 2
CopyScriptButton.Position = UDim2.new(0, 270, 0, 465)
CopyScriptButton.Size = UDim2.new(0, 200, 0, 35)
CopyScriptButton.AutoButtonColor = false
CopyScriptButton.Font = Enum.Font.GothamBold
CopyScriptButton.Text = "Copy Script"
CopyScriptButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CopyScriptButton.TextSize = 14.000

UICorner_18.CornerRadius = UDim.new(0, 12)
UICorner_18.Parent = CopyScriptButton

ExecuteButton_3.Name = "ExecuteButton"
ExecuteButton_3.Parent = Buttons
ExecuteButton_3.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
ExecuteButton_3.Position = UDim2.new(0, 30, 0, 465)
ExecuteButton_3.Size = UDim2.new(0, 200, 0, 35)
ExecuteButton_3.AutoButtonColor = false
ExecuteButton_3.Font = Enum.Font.GothamBold
ExecuteButton_3.Text = "Execute"
ExecuteButton_3.TextColor3 = Color3.fromRGB(255, 255, 255)
ExecuteButton_3.TextSize = 14.000

UICorner_19.CornerRadius = UDim.new(0, 12)
UICorner_19.Parent = ExecuteButton_3

InfoBoxDescription.Name = "InfoBoxDescription"
InfoBoxDescription.Parent = InfoBox
InfoBoxDescription.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
InfoBoxDescription.BackgroundTransparency = 1.000
InfoBoxDescription.Size = UDim2.new(0, 378, 0, 0)
InfoBoxDescription.Font = Enum.Font.Gotham
InfoBoxDescription.Text = "This is a pretty cool description!"
InfoBoxDescription.TextColor3 = Color3.fromRGB(255, 255, 255)
InfoBoxDescription.TextSize = 20.000
InfoBoxDescription.TextWrapped = true
InfoBoxDescription.TextXAlignment = Enum.TextXAlignment.Left
InfoBoxDescription.TextYAlignment = Enum.TextYAlignment.Top

Comments.Name = "Comments"
Comments.Parent = InfoBox
Comments.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Comments.Size = UDim2.new(0, 950, 0, 200)

UICorner_20.CornerRadius = UDim.new(0, 12)
UICorner_20.Parent = Comments

Inner.Name = "Inner"
Inner.Parent = Comments
Inner.AnchorPoint = Vector2.new(0.5, 0.5)
Inner.BackgroundColor3 = Color3.fromRGB(13, 18, 39)
Inner.Position = UDim2.new(0.5, 0, 0.5, 0)
Inner.Size = UDim2.new(0, 946, 0, 196)

UICorner_21.CornerRadius = UDim.new(0, 12)
UICorner_21.Parent = Inner

Line.Name = "Line"
Line.Parent = Inner
Line.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Line.BorderSizePixel = 0
Line.LayoutOrder = 1
Line.Position = UDim2.new(0, 0, 0, 25)
Line.Size = UDim2.new(0, 946, 0, 2)

CommentsText.Name = "CommentsText"
CommentsText.Parent = Inner
CommentsText.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
CommentsText.BackgroundTransparency = 1.000
CommentsText.Size = UDim2.new(0, 976, 0, 25)
CommentsText.Font = Enum.Font.GothamBold
CommentsText.Text = "Comments"
CommentsText.TextColor3 = Color3.fromRGB(255, 255, 255)
CommentsText.TextSize = 14.000

Comments_2.Name = "Comments"
Comments_2.Parent = Inner
Comments_2.Active = true
Comments_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Comments_2.BackgroundTransparency = 1.000
Comments_2.BorderSizePixel = 0
Comments_2.Position = UDim2.new(0, 5, 0, 30)
Comments_2.Size = UDim2.new(0, 935, 0, 160)
Comments_2.CanvasSize = UDim2.new(0, 0, 0, 0)

Comment.Name = "Comment"
Comment.Parent = Comments_2
Comment.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Comment.BackgroundTransparency = 1.000
Comment.Size = UDim2.new(0, 920, 0, 50)

Content.Name = "Content"
Content.Parent = Comment
Content.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Content.BackgroundTransparency = 1.000
Content.Position = UDim2.new(0, 50, 0, 30)
Content.Size = UDim2.new(0, 880, 0, 20)
Content.Font = Enum.Font.Gotham
Content.Text = "Pretty Cool Comment"
Content.TextColor3 = Color3.fromRGB(255, 255, 255)
Content.TextSize = 14.000
Content.TextWrapped = true
Content.TextXAlignment = Enum.TextXAlignment.Left
Content.TextYAlignment = Enum.TextYAlignment.Top

Author_2.Name = "Author"
Author_2.Parent = Comment
Author_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Author_2.BackgroundTransparency = 1.000
Author_2.BorderSizePixel = 0
Author_2.Position = UDim2.new(0, 50, 0, 5)
Author_2.Size = UDim2.new(0, 200, 0, 25)
Author_2.Font = Enum.Font.GothamBold
Author_2.Text = "Author"
Author_2.TextColor3 = Color3.fromRGB(255, 255, 255)
Author_2.TextSize = 20.000
Author_2.TextWrapped = true
Author_2.TextXAlignment = Enum.TextXAlignment.Left

ProfilePicture_2.Name = "ProfilePicture"
ProfilePicture_2.Parent = Comment
ProfilePicture_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ProfilePicture_2.BackgroundTransparency = 1.000
ProfilePicture_2.Position = UDim2.new(0, 5, 0, 5)
ProfilePicture_2.Size = UDim2.new(0, 40, 0, 40)
ProfilePicture_2.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"

UICorner_22.CornerRadius = UDim.new(1, 0)
UICorner_22.Parent = ProfilePicture_2

UIListLayout_3.Parent = Comments_2
UIListLayout_3.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout_3.Padding = UDim.new(0, 5)



assert(assert, "Assert couldn't assert itself! I think your computer might be broken.")

function createfolders(path)
	local pathtbl = string.split(path, "/")
	for i, v in pairs(pathtbl) do
		if i == 1 then
			if not isfolder(v) then
				makefolder(v)
			end
		else
			local newpath = pathtbl[1]
			for i2=2, i-1 do
				newpath = newpath.. "/" ..pathtbl[i2]
			end
			newpath = newpath.. "/" ..v
			if not isfolder(newpath) then
				makefolder(newpath)
			end
		end
	end
end

if not isfile("ScriptBlox/Searcher/Cache.json") and isfolder("ScriptBlox") then
	delfolder("ScriptBlox")
end

createfolders("ScriptBlox/Searcher/ImageCache/Scripts")
createfolders("ScriptBlox/Searcher/ImageCache/ProfilePictures")

if not isfile("ScriptBlox/Searcher/Cache.json") then
	writefile("ScriptBlox/Searcher/Cache.json", "{}")
end

ScriptBloxSearcher.MainFrame.InfoBox.Visible = false

local getfakeasset = getcustomasset or getsynasset

local HttpService = game:GetService("HttpService")
local TweenService = game:GetService("TweenService")
local TextService = game:GetService("TextService")

local cache = HttpService:JSONDecode(readfile("ScriptBlox/Searcher/Cache.json"))

local page = 1
local gquery = ""

function tableConcat(t1,t2)
	for i, v in pairs(t2) do
		table.insert(t1, v)
	end
	return t1
end

-- UI Conversion Fixes
ScriptBloxSearcher.MainFrame.TopBarFrame.Title.RichText = true
ScriptBloxSearcher.MainFrame.ScriptListFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
ScriptBloxSearcher.MainFrame.InfoBox.InfoBoxDescription.AutomaticSize = Enum.AutomaticSize.Y
ScriptBloxSearcher.MainFrame.ScriptListFrame.ScrollBarImageColor3 = Color3.fromRGB(0, 0, 0)
ScriptBloxSearcher.MainFrame.InfoBox.AutomaticCanvasSize = Enum.AutomaticSize.Y
ScriptBloxSearcher.MainFrame.InfoBox.Comments.Inner.Comments.AutomaticCanvasSize = Enum.AutomaticSize.Y
ScriptBloxSearcher.MainFrame.InfoBox.Comments.Inner.Comments.ScrollBarImageColor3 = Color3.new(0, 0, 0)
ScriptBloxSearcher.MainFrame.InfoBox.ScrollBarImageColor3 = Color3.new(0, 0, 0)

-- Templates
local VerifiedScript = ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts.VerifiedScriptFrame:Clone()
local Script = ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts.ScriptFrame:Clone()
ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts.ScriptFrame:Destroy()
ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts.VerifiedScriptFrame:Destroy()

local Comment = ScriptBloxSearcher.MainFrame.InfoBox.Comments.Inner.Comments.Comment:Clone()
ScriptBloxSearcher.MainFrame.InfoBox.Comments.Inner.Comments.Comment:Destroy()

-- Hover transition function
function setHoverTransition(from, to, obj)
	from = from or obj.BackgroundColor3
	
	obj.MouseEnter:Connect(function()

		TweenService:Create(obj, TweenInfo.new(0.2, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut), {
			BackgroundColor3 = to
		}):Play()

	end)
	
	obj.MouseLeave:Connect(function()

		TweenService:Create(obj, TweenInfo.new(0.2, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut), {
			BackgroundColor3 = from
		}):Play()

	end)
end

-- Info Box Hover Trabsitions
setHoverTransition(nil, Color3.new(0.152941, 0.188235, 0.345098), ScriptBloxSearcher.MainFrame.InfoBox.Buttons.ExecuteButton)
setHoverTransition(nil, Color3.new(0.152941, 0.188235, 0.345098), ScriptBloxSearcher.MainFrame.InfoBox.Buttons.Close)
setHoverTransition(nil, Color3.new(0.152941, 0.188235, 0.345098), ScriptBloxSearcher.MainFrame.InfoBox.Buttons.CopyScriptBloxLink)
setHoverTransition(nil, Color3.new(0.152941, 0.188235, 0.345098), ScriptBloxSearcher.MainFrame.InfoBox.Buttons.CopyScriptButton)

function _if(a, b, c)
	if a then return b else return c end
end

function fastmodeExec(func)
	if getgenv().fastmode == true then
		task.spawn(func)
	else
		func()
	end
end

-- fetchScripts function
function fetchScripts(query, page)
	page = page or 1
	query = HttpService:UrlEncode(query)
	
	local url = _if(query == "", "https://www.scriptblox.com/api/script/fetch?page="..tostring(page), "https://scriptblox.com/api/script/search?q="..query.."&max=100&mode=free&page=".. tostring(page))
	local req = HttpService:JSONDecode(game:HttpGetAsync(url)).result
	
	return req.scripts
end

function fetchComments(scriptId, page)
	page = page or 1	
	
	local url = "https://scriptblox.com/api/comment/" ..scriptId.. "?page=" ..tostring(page).. "&max=20"
	local req = HttpService:JSONDecode(game:HttpGetAsync(url)).result
	
	return req.comments
end

function loadImage(url, id, ispfp)
	ispfp = _if(type(ispfp) == "boolean", ispfp, false)
	
	local path = "ScriptBlox/Searcher/ImageCache/" .._if(ispfp, "ProfilePictures/", "Scripts/")..id..".png"
	
	if table.find(string.split(url, "/"), "user-default.png") then
		path = "ScriptBlox/Searcher/ImageCache/ProfilePictures/user-default.png"
	end
	
	if isfile(path) then
		return getfakeasset(path)
	else
		local img = game:HttpGetAsync(url)
		writefile(path, img)
		
		return getfakeasset(path)
	end
end

function fixScript(scriptObj)
	if not scriptObj["script"] or not scriptObj["owner"] or not scriptObj["features"] then
		local cacheObj = cache[scriptObj["_id"]]
		if cacheObj then
			scriptObj["script"] = _if(scriptObj["script"], scriptObj["script"], cacheObj.script)
			scriptObj["features"] = _if(scriptObj["features"], scriptObj["features"], cacheObj.features)
			scriptObj["owner"] = _if(scriptObj["owner"], scriptObj["owner"], cacheObj.owner)
		else
			local req = HttpService:JSONDecode(game:HttpGetAsync("https://www.scriptblox.com/api/script/".. scriptObj.slug)).script
			scriptObj["script"] = _if(scriptObj["script"], scriptObj["script"], req.script)
			scriptObj["features"] = _if(scriptObj["features"], scriptObj["features"], req.features)
			scriptObj["owner"] = _if(scriptObj["owner"], scriptObj["owner"], req.owner)
			
			cache[scriptObj["_id"]] = req
		end
	end
	return scriptObj
end

function updateCache(newCache)
	cache = newCache
	writefile("ScriptBlox/Searcher/Cache.json", HttpService:JSONEncode(cache))
end

function updateInfoBox(scriptObj)
	scriptObj = fixScript(scriptObj)
	
	ScriptBloxSearcher.MainFrame.InfoBox.Info.Author.InfoBoxAuthor.Text = scriptObj.owner.username
	ScriptBloxSearcher.MainFrame.InfoBox.Info.Title.InfoBoxTitle.Text = scriptObj.title
	ScriptBloxSearcher.MainFrame.InfoBox.Info.Game.Text = scriptObj.game.name
	ScriptBloxSearcher.MainFrame.InfoBox.InfoBoxDescription.Text = scriptObj.features or "For features to be displayed, please use the search bar to find this script and then open the info again, this is caused by an API Error that I will fix later."
	
	task.spawn(function()
		ScriptBloxSearcher.MainFrame.InfoBox.Info.Author.ProfilePicture.Image = loadImage("https://scriptblox.com"..scriptObj.owner.profilePicture, scriptObj["owner"]["_id"], true)
	end)
	task.spawn(function()
		ScriptBloxSearcher.MainFrame.InfoBox.Info.PreviewImage.Image = loadImage(_if(string.find(scriptObj.game.imageUrl, "rbxcdn.com"), scriptObj.game.imageUrl, "https://scriptblox.com"..scriptObj.game.imageUrl), scriptObj["_id"], false)
	end)
	
	local ExecuteConnection
	local CopyLinkConnection
	local CopyScriptConnection
	
	ExecuteConnection = ScriptBloxSearcher.MainFrame.InfoBox.Buttons.ExecuteButton.MouseButton1Click:Connect(function()
		loadstring(scriptObj.script)()
	end)
	
	CopyLinkConnection = ScriptBloxSearcher.MainFrame.InfoBox.Buttons.CopyScriptBloxLink.MouseButton1Click:Connect(function()
		setclipboard("https://scriptblox.com/script/".. scriptObj.slug)
	end)
	
	CopyScriptConnection = ScriptBloxSearcher.MainFrame.InfoBox.Buttons.CopyScriptButton.MouseButton1Click:Connect(function()
		setclipboard(scriptObj.script)
	end)
	
	ScriptBloxSearcher.MainFrame.InfoBox.Buttons.Close.MouseButton1Click:Connect(function()
		ExecuteConnection:Disconnect()
		CopyLinkConnection:Disconnect()
		CopyScriptConnection:Disconnect()
		
		ScriptBloxSearcher.MainFrame.InfoBox.Visible = false
		ScriptBloxSearcher.MainFrame.ScriptListFrame.Visible = true
	end)
	
	local commentsUIListLayout = ScriptBloxSearcher.MainFrame.InfoBox.Comments.Inner.Comments.UIListLayout:Clone()
	ScriptBloxSearcher.MainFrame.InfoBox.Comments.Inner.Comments:ClearAllChildren()
	commentsUIListLayout.Parent = ScriptBloxSearcher.MainFrame.InfoBox.Comments.Inner.Comments
	
	task.spawn(function()
		for _, v in pairs(fetchComments(scriptObj["_id"])) do

			local newComment = Comment:Clone()
			newComment.Parent = ScriptBloxSearcher.MainFrame.InfoBox.Comments.Inner.Comments
			newComment.Content.Text = v.text
			newComment.Author.Text = v.commentBy.username

			task.spawn(function()
				newComment.ProfilePicture.Image = loadImage("https://scriptblox.com"..v.commentBy.profilePicture, v.commentBy["_id"], true)
			end)

		end
	end)
end

-- Refresh Scripts Browser with new scripts
function refreshScripts(scriptTbl)
	if #scriptTbl <= 0 then
		ScriptBloxSearcher.MainFrame["No Scripts Found"].Visible = true
		return
	else
		ScriptBloxSearcher.MainFrame["No Scripts Found"].Visible = false
	end
	
	local UIGridLayoutCopy = ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts.UIGridLayout:Clone()
	ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts:ClearAllChildren()
	UIGridLayoutCopy.Parent = ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts
	
	addScripts(scriptTbl)
end

function addScripts(scriptTbl)
	for i, v in pairs(scriptTbl) do
		fastmodeExec(function()
			local newScript

			v = fixScript(v)

			if v.verified == true then
				newScript = VerifiedScript:Clone()
				newScript.ScriptTitle.Text = v.title
				newScript.ScriptAuthor.Text = "by ".. v.owner.username
				newScript.ScriptGame.Text = v.game.name
				newScript.Parent = ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts
			else
				newScript = Script:Clone()
				newScript.ScriptTitle.Text = v.title
				newScript.ScriptAuthor.Text = "by ".. v.owner.username
				newScript.ScriptGame.Text = v.game.name
				newScript.Parent = ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts
			end

			-- Execute Button
			newScript.ExecuteButton.MouseButton1Click:Connect(function()
				loadstring(v.script)()
			end)

			setHoverTransition(newScript.ExecuteButton.BackgroundColor3, Color3.new(0.152941, 0.188235, 0.345098), newScript.ExecuteButton)

			-- Info Button
			newScript.InfoButton.MouseButton1Click:Connect(function()
				updateInfoBox(v)
				task.wait()
				ScriptBloxSearcher.MainFrame.InfoBox.Visible = true
				ScriptBloxSearcher.MainFrame.ScriptListFrame.Visible = false
			end)

			setHoverTransition(newScript.InfoButton.BackgroundColor3, Color3.new(0.152941, 0.188235, 0.345098), newScript.InfoButton)

			-- Background
			setHoverTransition(newScript.BackgroundColor3, Color3.new(0.254902, 0.317647, 0.576471), newScript)
		end)
	end
	
	updateCache(cache)
	
	pagefetchrunning = false
end



-- Search Bar
ScriptBloxSearcher.MainFrame.TopBarFrame.SearchBox.FocusLost:Connect(function(enterPressed)
	if enterPressed then
		gquery = ScriptBloxSearcher.MainFrame.TopBarFrame.SearchBox.Text
		page = 1
		local scriptsTbl = fetchScripts(ScriptBloxSearcher.MainFrame.TopBarFrame.SearchBox.Text, 1)
		refreshScripts(scriptsTbl)
	end
end)

-- Closing
ScriptBloxSearcher.MainFrame.TopBarFrame.CloseButton.MouseButton1Click:Connect(function()
	ScriptBloxSearcher.Enabled = false
end)
setHoverTransition(nil, Color3.fromRGB(214, 71, 74), ScriptBloxSearcher.MainFrame.TopBarFrame.CloseButton)

-- Clear Cache
ScriptBloxSearcher.MainFrame.TopBarFrame.ClearCacheButton.MouseButton1Click:Connect(function()
	updateCache({})
	for _, v in pairs(listfiles("ScriptBlox/Searcher/ImageCache/ProfilePictures")) do
		delfile(_if(string.find(v, "ScriptBlox"), v, "ScriptBlox/Searcher/ImageCache/ProfilePictures/"..v))
	end
	for _, v in pairs(listfiles("ScriptBlox/Searcher/ImageCache/Scripts")) do
		delfile(_if(string.find(v, "ScriptBlox"), v, "ScriptBlox/Searcher/ImageCache/Scripts/"..v))
	end
end)
setHoverTransition(nil, Color3.new(0.254902, 0.317647, 0.576471), ScriptBloxSearcher.MainFrame.TopBarFrame.ClearCacheButton)

-- Dragging
local UserInputService = game:GetService("UserInputService")
local gui = ScriptBloxSearcher.MainFrame

local dragging
local dragInput
local dragStart
local startPos

local function update(input)
	local delta = input.Position - dragStart
	gui.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

gui.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = gui.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

gui.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		update(input)
	end
end)

refreshScripts(fetchScripts(gquery, 1))

ScriptBloxSearcher.MainFrame.ScriptListFrame:GetPropertyChangedSignal("CanvasPosition"):Connect(function()
	if (ScriptBloxSearcher.MainFrame.ScriptListFrame.CanvasPosition.Y + ScriptBloxSearcher.MainFrame.ScriptListFrame.AbsoluteSize.Y) >= ScriptBloxSearcher.MainFrame.ScriptListFrame.AbsoluteCanvasSize.Y -200 and not pagefetchrunning then
		page = page + 1
		pagefetchrunning = true
		addScripts(fetchScripts(gquery, page))
	end
end)


local maingui = Instance.new("ScreenGui")
local TextButton = Instance.new("TextButton")
local TextButton_2 = Instance.new("TextButton")
local TextButton_3 = Instance.new("TextButton")
local TextButton_4 = Instance.new("TextButton")
local open = Instance.new("TextButton")
local UICorner_1 = Instance.new("UICorner")
local UICorner_2 = Instance.new("UICorner")
local UICorner_3 = Instance.new("UICorner")
local UICorner_4 = Instance.new("UICorner")
local UICorner_5 = Instance.new("UICorner")
local Frame = Instance.new("Frame")

maingui.Name = "maingui"
maingui.Parent = game.CoreGui
maingui.Enabled = true

TextButton.Parent = maingui
TextButton.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
TextButton.Position = UDim2.new(0.01, 0, 0.290350878, 0)
TextButton.Size = UDim2.new(0, 200, 0, 50)
TextButton.Font = Enum.Font.Gotham
TextButton.TextColor3 = Color3.fromRGB(255, 255, 255)
TextButton.TextSize = 14.000
TextButton.BorderSizePixel = 0
TextButton.Text = "Executor"
TextButton.Visible = false
UICorner_1.Parent = TextButton

TextButton_2.Parent = maingui
TextButton_2.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
TextButton_2.Position = UDim2.new(0.01, 0, 0.41, 0)
TextButton_2.Size = UDim2.new(0, 200, 0, 50)
TextButton_2.Font = Enum.Font.SourceSans
TextButton_2.TextColor3 = Color3.fromRGB(255, 255, 255)
TextButton_2.TextSize = 14.000
TextButton_2.BorderSizePixel = 0
TextButton_2.Text = "Script Browser"
TextButton_2.Visible = false
UICorner_2.Parent = TextButton_2

TextButton_3.Parent = maingui
TextButton_3.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
TextButton_3.Position = UDim2.new(0.01, 0, 0.53, 0)
TextButton_3.Size = UDim2.new(0, 200, 0, 50)
TextButton_3.Font = Enum.Font.SourceSans
TextButton_3.TextColor3 = Color3.fromRGB(255, 255, 255)
TextButton_3.TextSize = 14.000
TextButton_3.BorderSizePixel = 0
TextButton_3.Text = "Settings"
TextButton_3.Visible = false
UICorner_3.Parent = TextButton_3

TextButton_4.Parent = maingui
TextButton_4.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
TextButton_4.Position = UDim2.new(0.01, 0, 0.65, 0)
TextButton_4.Size = UDim2.new(0, 200, 0, 50)
TextButton_4.Font = Enum.Font.SourceSans
TextButton_4.TextColor3 = Color3.fromRGB(255, 255, 255)
TextButton_4.TextSize = 14.000
TextButton_4.BorderSizePixel = 0
TextButton_4.Text = "Close"
TextButton_4.Visible = false
UICorner_4.Parent = TextButton_4

open.Parent = maingui
open.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
open.Position = UDim2.new(0.01, 0, 0.9, 0)
open.Size = UDim2.new(0, 70, 0, 50)
open.Font = Enum.Font.SourceSans
open.TextColor3 = Color3.fromRGB(255, 255, 255)
open.TextSize = 14.000
open.BorderSizePixel = 0
open.Text = "Menu"
UICorner_5.Parent = open

Frame.Parent = maingui
Frame.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
Frame.Position = UDim2.new(0.744548321, 0, 0.207602322, 0)
Frame.Size = UDim2.new(0, 400, 0, 300)
Frame.Visible = false

blur = Instance.new("BlurEffect", game.Lighting)
blur.Size = 0

TextButton_2.MouseButton1Click:connect(function()
ScriptBloxSearcher.Enabled = true
end)

TextButton_4.MouseButton1Click:connect(function()
TextButton.Visible = false
wait(0.20)
TextButton_2.Visible = false
wait(0.20)
TextButton_3.Visible = false
wait(0.20)
TextButton_4.Visible = false
blur.Size = 0
end)

open.MouseButton1Click:connect(function()
blur.Size = 35
TextButton.Visible = true
wait(0.20)
TextButton_2.Visible = true
wait(0.20)
TextButton_3.Visible = true
wait(0.20)
TextButton_4.Visible = true
end)

local CMDS = Instance.new("ScreenGui")
local CMDSFRAME = Instance.new("Frame")
local ScrollingFrame = Instance.new("ScrollingFrame")
local TextLabel = Instance.new("TextLabel")
local closegui = Instance.new("TextButton")
CMDS.Name = "CMDS"
CMDS.Parent = game:GetService("CoreGui")
CMDSFRAME.Name = "CMDSFRAME"
CMDSFRAME.Parent = CMDS
CMDSFRAME.Active = true
CMDSFRAME.BackgroundColor3 = Color3.new(0.223529, 0.231373, 0.309804)
CMDSFRAME.BorderSizePixel = 0
CMDSFRAME.Draggable = true
CMDSFRAME.Position = UDim2.new(0, 315, 0, 100)
CMDSFRAME.Size = UDim2.new(0, 275, 0, 275)
CMDSFRAME.Visible = false
ScrollingFrame.Parent = CMDSFRAME
ScrollingFrame.BackgroundColor3 = Color3.new(0.160784, 0.160784, 0.203922)
ScrollingFrame.BorderSizePixel = 0
ScrollingFrame.Position = UDim2.new(0, 0, 0.0729999989, 0)
ScrollingFrame.Size = UDim2.new(1.04999995, 0, 0.92900002, 0)
ScrollingFrame.CanvasSize = UDim2.new(0, 0, 10, 0)
TextLabel.Parent = ScrollingFrame
TextLabel.BackgroundColor3 = Color3.new(1, 1, 1)
TextLabel.BackgroundTransparency = 1
TextLabel.Size = UDim2.new(0.930000007, 0, 1, 0)
TextLabel.Font = Enum.Font.SourceSans
TextLabel.FontSize = Enum.FontSize.Size18
TextLabel.Text = "{1} fly - makes you fly\n{2} kill [plr] - kills the player\n{3} bring [plr] - brings the player\n{4} killall - kills everyone (buggy)\n{5} bringall - brings everyone (buggy)\n{5} re/respawn - respawns character\n{6} dex - loads up dex explorer\n{7} gameid/placeid - copies the placeid\n{7} savepos - saves your current position\n{8} loadpos - loads your saved position\n{9} swim - makes you swim\n{10} unswim - stops swimming\n{11} getpos - copies humanoidrootpart position\n{12} speed - changes your walkspeed\n{13} jumppower - changes your jumppower\n{14} tptool/teleporttool - gives teleport tool\n{15} view [plr] - views the player\n{16} unview - stops viewing the player\n{17} rj/rejoin - rejoins the game\n{18} dupetools [val] - clones the tools\n{19} antiban - enables antiban (not sure)\n{20} to [plr] - teleports to player\n{21} prefix [str] - sets prefix to a new one\n{22} spblockspam - starter place block spam\n{23} unspblockspam - stops block spam\n{24} firecd/fireclickdetector - fires all clickdetectors\n{25} nocdlimits - removes clickdetector limits\n{26} unfly - stops flying\n{27} fly2 - sit fly lol\n{28} sit - makes your character sit"
TextLabel.TextColor3 = Color3.new(1, 1, 1)
TextLabel.TextSize = 15
TextLabel.TextWrapped = true
TextLabel.TextXAlignment = Enum.TextXAlignment.Left
TextLabel.TextYAlignment = Enum.TextYAlignment.Top
closegui.Name = "closegui"
closegui.Parent = CMDSFRAME
closegui.BackgroundColor3 = Color3.new(0.890196, 0.223529, 0.0588235)
closegui.BorderSizePixel = 0
closegui.Position = UDim2.new(0.995000005, 0, 0, 0)
closegui.Size = UDim2.new(0.0545952693, 0, 0.0728644878, 0)
closegui.BackgroundTransparency = 1
closegui.Font = Enum.Font.SourceSansBold
closegui.FontSize = Enum.FontSize.Size24
closegui.Text = "X"
closegui.TextColor3 = Color3.new(1, 1, 1)
closegui.TextSize = 20

closegui.MouseButton1Click:connect(function()
	CMDSFRAME.Visible = false
end)


local cmdbar = Instance.new("ScreenGui")
local cmdframe = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local txtexec = Instance.new("TextBox")
local thearrow = Instance.new("TextLabel")

--Properties:

cmdbar.Parent = game.CoreGui
cmdbar.Enabled = false

cmdframe.Parent = cmdbar
cmdframe.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
cmdframe.BackgroundTransparency = 0
cmdframe.Position = UDim2.new(0.34, 0, 0.845029235, 0)
cmdframe.Size = UDim2.new(0, 260, 0, 34)

UICorner.Parent = cmdframe

txtexec.Parent = cmdframe
txtexec.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
txtexec.BackgroundTransparency = 1.000
txtexec.Position = UDim2.new(0.138461545, 0, -0.01, 0)
txtexec.Size = UDim2.new(0, 200, 0, 50)
txtexec.Font = Enum.Font.Gotham
txtexec.Text = ""
txtexec.TextColor3 = Color3.fromRGB(255, 255, 255)
txtexec.TextSize = 28.000
txtexec.TextWrapped = true
txtexec.TextXAlignment = Enum.TextXAlignment.Left
txtexec.TextYAlignment = Enum.TextYAlignment.Top
txtexec.ClearTextOnFocus = false
txtexec.PlaceholderText = "Press Qoute To Focus"

thearrow.Parent = cmdframe
thearrow.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
thearrow.BackgroundTransparency = 1.000
thearrow.Position = UDim2.new(-0.303846151, 0, -0.235293865, 0)
thearrow.Size = UDim2.new(0, 200, 0, 50)
thearrow.Font = Enum.Font.Code
thearrow.Text = ">"
thearrow.TextColor3 = Color3.fromRGB(255, 145, 19)
thearrow.TextSize = 37.000

local function FadeIn()
for i = 1, 0, -0.3 do
wait(0.1)
cmdframe.Transparency = i
end
cmdframe.Transparency = 0
cmdbar.Enabled = true
end

local function FadeOut()
for i = 0, 1, 0.3 do
wait(0.1)
cmdframe.Transparency = i
end
cmdframe.Transparency = 1
cmdbar.Enabled = false
end


local Name = "KRXL.ts"

local DefaultSettings = {
Aimbot = false,
Prefix = ":",
userisnew = false,
keepcmdbar = false,
InstantKill = true,
ESP = true
}

local Settings

if not pcall(function() readfile(Name) end) then 
writefile(Name, 
game:service'HttpService':JSONEncode(DefaultSettings)) end

Settings = game:service'HttpService':JSONDecode(readfile(Name))

local function Save()
writefile(Name,game:service'HttpService':JSONEncode(Settings))
end


function CMDBARFOCUS()
cmdbar.Enabled = true
FadeIn()
txtexec.Text = Settings.Prefix
txtexec:CaptureFocus()
end

uis.InputBegan:Connect(function(input)
if input.KeyCode == Enum.KeyCode.Quote then
CMDBARFOCUS()
end
end)


task.spawn(function()
local success, result = pcall(function() chatbox = plrgui:WaitForChild("Chat").Frame.ChatBarParentFrame.Frame.BoxFrame.Frame.ChatBar end)
if success then
chatbox = plrgui.Chat.Frame.ChatBarParentFrame.Frame.BoxFrame.Frame.ChatBar

chatbox:GetPropertyChangedSignal("Text"):Connect(function()
chatbox.FocusLost:Connect(function(chtcmd)
if chtcmd then

if chatbox.Text:lower():sub(1,1) == Settings.Prefix then
txtexec.Text = chatbox.Text
txtexec:CaptureFocus()
wait(0.1)
txtexec:ReleaseFocus()
end
end
end)
end)
function chatboxcommands()
if chatbox.Text:lower():sub(1,1) == Settings.Prefix then
local A_1 = "" ..txtexec.text.. ""
local A_2 = "All"
local Event = game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest
Event:FireServer(A_1, A_2)
end
chatbox.Text = ""
end
end
end)


-- cmdbar

txtexec.FocusLost:Connect(function(enterPressed)
if Settings.keepcmdbar == false then
FadeOut()
else
-- print("user has keepcmdbaron")
end

if enterPressed then
chatboxcommands()
end

if string.sub(txtexec.Text, 1, 4) == (Settings.Prefix.."to ") then
for i,v in pairs(gplr(string.sub(txtexec.Text, 5))) do
local target = game:GetService("Players")
[v.Name]
if target.Character ~= nil then
if plr.Character:FindFirstChildOfClass('Humanoid') and plr.Character:FindFirstChildOfClass('Humanoid').SeatPart then				plr.Character:FindFirstChildOfClass('Humanoid').Sit = false
wait(.1)
end
plr.Character.HumanoidRootPart.CFrame = target.Character.Head.CFrame
end
end
end

if string.sub(txtexec.Text, 1, 9) == (Settings.Prefix.."fpsboost") then
local a = game
local b = a.Workspace
local c = a.Lighting
local d = b.Terrain
d.WaterWaveSize = 0
d.WaterWaveSpeed = 0
d.WaterReflectance = 0
d.WaterTransparency = 0
c.GlobalShadows = false
c.FogEnd = 9e9
c.Brightness = 0
settings().Rendering.QualityLevel = "Level01"
for e, f in pairs(a:GetDescendants()) do
if f:IsA("Part") or f:IsA("Union") or f:IsA("CornerWedgePart") or f:IsA("TrussPart") then
f.Material = "Plastic"
f.Reflectance = 0
elseif f:IsA("Decal") or f:IsA("Texture") then
f.Transparency = 0
elseif f:IsA("ParticleEmitter") or f:IsA("Trail") then
f.Lifetime = NumberRange.new(0)
elseif f:IsA("Explosion") then
f.BlastPressure = 0
f.BlastRadius = 0
elseif f:IsA("Fire") or f:IsA("SpotLight") or f:IsA("Smoke") or f:IsA("Sparkles") then
f.Enabled = false
elseif f:IsA("MeshPart") then
f.Material = "Plastic"
f.Reflectance = 0
f.TextureID = 10385902758728957
end
end
for e, g in pairs(c:GetChildren()) do
if
g:IsA("BlurEffect") or g:IsA("SunRaysEffect") or g:IsA("ColorCorrectionEffect") or g:IsA("BloomEffect") or
g:IsA("DepthOfFieldEffect")
then
g.Enabled = false
end
end
sethiddenproperty(game.Lighting, "Technology", "Compatibility")
end

if string.sub(txtexec.Text, 1, 17) == (Settings.Prefix.."antiban") then
local renv = getrenv()
local old_spawn = renv.spawn
renv.spawn = function(f)
local env = getfenv(0)
if env.Ban then
env.Ban = function() print('caught ban') end
error('caught ban') -- prevent it from going on to lag the game out
end
old_spawn(f)
end
local mt = getrawmetatable(game)
local namecall = mt.__namecall
mt.__namecall = function(...)
local arguments = {...}
if arguments[1].Name == 'RequestWeapon' and arguments[#arguments] == 'FireServer' and arguments[2] == 'Ban' then
return
end
return namecall(...)
end
end


if string.sub(txtexec.Text, 1, 6) == (Settings.Prefix.."kill ") then
savedpos = plr.Character:FindFirstChild("HumanoidRootPart").CFrame
for i,v in pairs(gplr(string.sub(txtexec.Text, 7))) do
rhumanoid()
for i,v in pairs(game:GetService'Players'.LocalPlayer.Backpack:GetChildren()) do
plr.Character.Humanoid:EquipTool(v)
end
local Tool = game.Players.LocalPlayer.Character:FindFirstChildOfClass("Tool")
repeat wait()
plr.Character.HumanoidRootPart.CFrame = game:GetService("Players")[v.Name].Character.HumanoidRootPart.CFrame
until Tool.Parent == game:GetService("Players")[v.Name].Character
plr.Character.Humanoid.Health = 0
plr.Character = nil
plr.CharacterAdded:Wait():WaitForChild("HumanoidRootPart").CFrame = savedpos
end
end

if string.sub(txtexec.Text, 1, 8) == (Settings.Prefix.."killall") then
savedpos = plr.Character:FindFirstChild("HumanoidRootPart").CFrame
cbringall = true
rhumanoid()
for _, tool in ipairs(game:GetService("Players").LocalPlayer.Backpack:GetChildren()) do
if tool:IsA("Tool") then
tool.Parent = game:GetService("Players").LocalPlayer.Character
end
end
wait(1.5)
cbringall = false
game.Players.LocalPlayer.Character.Humanoid.Health = 0
game.Players.LocalPlayer.Character = nil
plr.CharacterAdded:Wait():WaitForChild("HumanoidRootPart").CFrame = savedpos
end


if string.sub(txtexec.Text, 1, 7) == (Settings.Prefix.."bring ") then
savedpos = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart").CFrame
rhumanoid()
for i,v in pairs(game:GetService'Players'.LocalPlayer.Backpack:GetChildren()) do
plr.Character.Humanoid:EquipTool(v)
local Tool = game.Players.LocalPlayer.Character:FindFirstChildOfClass("Tool")
for i,v in pairs(gplr(string.sub(txtexec.Text, 8))) do
repeat wait()
game:GetService("Players")[v.Name].Character.HumanoidRootPart.CFrame = plr.Character.HumanoidRootPart.CFrame
until Tool.Parent == game:GetService("Players")[v.Name].Character
end
plr.CharacterAdded:Wait():WaitForChild("HumanoidRootPart").CFrame = savedpos
end
end


if string.sub(txtexec.Text, 1, 9) == (Settings.Prefix.."bringall") then
savedpos = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart").CFrame
cbringall = true
rhumanoid()
for _, tool in ipairs(game:GetService("Players").LocalPlayer.Backpack:GetChildren()) do
if tool:IsA("Tool") then
tool.Parent = game:GetService("Players").LocalPlayer.Character
end
end
wait(1.5)
cbringall = false
plr.CharacterAdded:Wait():WaitForChild("HumanoidRootPart").CFrame = savedpos
end

if string.sub(txtexec.Text, 1, 3) == (Settings.Prefix.."rj") then
local ts = game:GetService("TeleportService")
local p = game:GetService("Players").LocalPlayer
ts:Teleport(game.PlaceId, p)
end

if string.sub(txtexec.Text, 1, 11) == (Settings.Prefix.."dupetools ") then
for i=1,string.sub(txtexec.Text, 12) do 
           
local block = Instance.new("Part")
local bp = Instance.new("BodyPosition")
block.CFrame = CFrame.new(9e9,9e9,9e9)
block.Anchored = true
local player = game.Players.LocalPlayer
local character = player.Character
local savepos = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
for i,v in pairs(player.Backpack:GetChildren()) do
   game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = block.CFrame
v.Parent = Character bp.Parent = v.Handle bp.Position = block.Position v.Handle.Velocity = Vector3.new(25.70,0,0) v.Handle.RotVelocity = Vector3.new(9e9,9e9,9e9)  v.Parent = game.Players.LocalPlayer.Backpack wait(1)   v.Parent = character task.wait(0)   v.Parent = workspace 
end
character:ClearAllChildren()
wait(7)
for i,v in pairs(game.workspace:GetDescendants()) do 
       if v:IsA("Tool") and v:FindFirstChild("Handle") then
           v.Handle.CanCollide = false
           bp:Destroy()
           v.Handle.RotVelocity = Vector3.new(0,0,0)
           game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = savepos
           v.Handle.CFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
           block:Destroy()
       end
     
end
end
end

if string.sub(txtexec.Text, 1, 10) == (Settings.Prefix.."nomeshtool") then
for i,v in pairs(plr.Character:GetChildren()) do
if (v:IsA("Tool")) then
v.Handle.Mesh:Destroy()
end
end
end

if string.sub(txtexec.Text, 1, 5) == (Settings.Prefix.."cmds") then
CMDSFRAME.Visible = true
end

if string.sub(txtexec.Text, 1, 8) == (Settings.Prefix.."prefix ") then
Settings.Prefix = string.sub(txtexec.Text, 9)
Save()
end

if string.sub(txtexec.Text, 1, 5) == (Settings.Prefix.."test") then
Settings.Aimbot = true
Save()
end

if string.sub(txtexec.Text, 1, 6) == (Settings.Prefix.."check") then
print(Settings.Aimbot)
end

if string.sub(txtexec.Text, 1, 4) == (Settings.Prefix.."sit") then
plr.Character:FindFirstChildOfClass("Humanoid").Sit = true
end

if string.sub(txtexec.Text, 1, 7) == (Settings.Prefix.."rejoin") then
local ts = game:GetService("TeleportService")
local p = game:GetService("Players").LocalPlayer
ts:Teleport(game.PlaceId, p)
end

if string.sub(txtexec.Text, 1, 7) == (Settings.Prefix.."nocdlimits") then
for i,v in ipairs(workspace:GetDescendants()) do
if v:IsA("ClickDetector") then
v.MaxActivationDistance = math.huge
end
end
end

if string.sub(txtexec.Text, 1, 7) == (Settings.Prefix.."firecd") or string.sub(txtexec.Text, 1, 18) == (Settings.Prefix.."fireclickdetector") then
if fireclickdetector then
for _, descendant in ipairs(workspace:GetDescendants()) do
if descendant:IsA("ClickDetector") then
fireclickdetector(descendant)
end
end
else
notify("Incompatible Exploit")
end
end

if string.sub(txtexec.Text, 1, 7) == (Settings.Prefix.."excats") then
game.workspace.muffy.Head:Remove()
game.workspace.socky.Head:Remove()
end


if string.sub(txtexec.Text, 1, 7) == (Settings.Prefix.."reach ") then
for i,v in pairs(game:GetService'Players'.LocalPlayer.Character:GetChildren())do 
if v:isA("Tool") then 
local a = Instance.new("SelectionBox",v.Handle)
a.Adornee = v.Handle 
v.Handle.Size = Vector3.new(0.5,0.5,string.sub(txtexec.Text, 8)) 
v.GripPos = Vector3.new(0,0,0) 
game.Players.LocalPlayer.Character.Humanoid:UnequipTools() 
end 
end
end

if string.sub(txtexec.Text, 1, 5) == (Settings.Prefix.."fly ") then
if nowe == true then
nowe = false
plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Climbing,true)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.FallingDown,true)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Flying,true)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Freefall,true)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.GettingUp,true)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Jumping,true)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Landed,true)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Physics,true)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.PlatformStanding,true)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Ragdoll,true)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Running,true)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.RunningNoPhysics,true)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated,true)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.StrafingNoPhysics,true)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Swimming,true)
		plr.Character.Humanoid:ChangeState(Enum.HumanoidStateType.RunningNoPhysics)
else 
nowe = true
for i = 1, string.sub(txtexec.Text, 6) do
spawn(function()
local hb = game:GetService("RunService").Heartbeat	
tpwalking = true
local chr = plr.Character
local hum = chr and chr:FindFirstChildWhichIsA("Humanoid")
while tpwalking and hb:Wait() and chr and hum and hum.Parent do
if hum.MoveDirection.Magnitude > 0 then					chr:TranslateBy(hum.MoveDirection)
end
end
end)
end
plr.Character.Animate.Disabled = true
local Char = plr.Character
local Hum = Char:FindFirstChildOfClass("Humanoid") or Char:FindFirstChildOfClass("AnimationController")
for i,v in next, Hum:GetPlayingAnimationTracks() do
v:AdjustSpeed(0)
end
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Climbing,false)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.FallingDown,false)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Flying,false)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Freefall,false)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.GettingUp,false)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Jumping,false)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Landed,false)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Physics,false)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.PlatformStanding,false)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Ragdoll,false)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Running,false)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.RunningNoPhysics,false)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated,false)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.StrafingNoPhysics,false)
		plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Swimming,false)
		plr.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Swimming)
end




if plr.Character:FindFirstChildOfClass("Humanoid").RigType == Enum.HumanoidRigType.R6 then
		local torso = plr.Character.Torso
		local flying = true
		local deb = true
		local ctrl = {f = 0, b = 0, l = 0, r = 0}
		local lastctrl = {f = 0, b = 0, l = 0, r = 0}
		local maxspeed = 50
		local speed = 0


		local bg = Instance.new("BodyGyro", torso)
		bg.P = 9e4
		bg.maxTorque = Vector3.new(9e9, 9e9, 9e9)
		bg.cframe = torso.CFrame
		local bv = Instance.new("BodyVelocity", torso)
		bv.velocity = Vector3.new(0,0.1,0)
		bv.maxForce = Vector3.new(9e9, 9e9, 9e9)
		if nowe == true then
			plr.Character.Humanoid.PlatformStand = true
		end
		while nowe == true or game:GetService("Players").LocalPlayer.Character.Humanoid.Health == 0 do
			game:GetService("RunService").RenderStepped:Wait()

			if ctrl.l + ctrl.r ~= 0 or ctrl.f + ctrl.b ~= 0 then
				speed = speed+.5+(speed/maxspeed)
				if speed > maxspeed then
					speed = maxspeed
				end
			elseif not (ctrl.l + ctrl.r ~= 0 or ctrl.f + ctrl.b ~= 0) and speed ~= 0 then
				speed = speed-1
				if speed < 0 then
					speed = 0
				end
			end
			if (ctrl.l + ctrl.r) ~= 0 or (ctrl.f + ctrl.b) ~= 0 then
				bv.velocity = ((game.Workspace.CurrentCamera.CoordinateFrame.lookVector * (ctrl.f+ctrl.b)) + ((game.Workspace.CurrentCamera.CoordinateFrame * CFrame.new(ctrl.l+ctrl.r,(ctrl.f+ctrl.b)*.2,0).p) - game.Workspace.CurrentCamera.CoordinateFrame.p))*speed
				lastctrl = {f = ctrl.f, b = ctrl.b, l = ctrl.l, r = ctrl.r}
			elseif (ctrl.l + ctrl.r) == 0 and (ctrl.f + ctrl.b) == 0 and speed ~= 0 then
				bv.velocity = ((game.Workspace.CurrentCamera.CoordinateFrame.lookVector * (lastctrl.f+lastctrl.b)) + ((game.Workspace.CurrentCamera.CoordinateFrame * CFrame.new(lastctrl.l+lastctrl.r,(lastctrl.f+lastctrl.b)*.2,0).p) - game.Workspace.CurrentCamera.CoordinateFrame.p))*speed
			else
				bv.velocity = Vector3.new(0,0,0)
			end
			--	game.Players.LocalPlayer.Character.Animate.Disabled = true
			bg.cframe = game.Workspace.CurrentCamera.CoordinateFrame * CFrame.Angles(-math.rad((ctrl.f+ctrl.b)*50*speed/maxspeed),0,0)
		end
		ctrl = {f = 0, b = 0, l = 0, r = 0}
		lastctrl = {f = 0, b = 0, l = 0, r = 0}
		speed = 0
		bg:Destroy()
		bv:Destroy()
		plr.Character.Humanoid.PlatformStand = false
plr.Character.Animate.Disabled = false
tpwalking = false




else
		local UpperTorso = plr.Character.UpperTorso
		local flying = true
		local deb = true
		local ctrl = {f = 0, b = 0, l = 0, r = 0}
		local lastctrl = {f = 0, b = 0, l = 0, r = 0}
		local maxspeed = 50
		local speed = 0


		local bg = Instance.new("BodyGyro", UpperTorso)
		bg.P = 9e4
		bg.maxTorque = Vector3.new(9e9, 9e9, 9e9)
		bg.cframe = UpperTorso.CFrame
		local bv = Instance.new("BodyVelocity", UpperTorso)
		bv.velocity = Vector3.new(0,0.1,0)
		bv.maxForce = Vector3.new(9e9, 9e9, 9e9)
		if nowe == true then
			plr.Character.Humanoid.PlatformStand = true
		end
		while nowe == true or game:GetService("Players").LocalPlayer.Character.Humanoid.Health == 0 do
			wait()

			if ctrl.l + ctrl.r ~= 0 or ctrl.f + ctrl.b ~= 0 then
				speed = speed+.5+(speed/maxspeed)
				if speed > maxspeed then
					speed = maxspeed
				end
			elseif not (ctrl.l + ctrl.r ~= 0 or ctrl.f + ctrl.b ~= 0) and speed ~= 0 then
				speed = speed-1
				if speed < 0 then
					speed = 0
				end
			end
			if (ctrl.l + ctrl.r) ~= 0 or (ctrl.f + ctrl.b) ~= 0 then
				bv.velocity = ((game.Workspace.CurrentCamera.CoordinateFrame.lookVector * (ctrl.f+ctrl.b)) + ((game.Workspace.CurrentCamera.CoordinateFrame * CFrame.new(ctrl.l+ctrl.r,(ctrl.f+ctrl.b)*.2,0).p) - game.Workspace.CurrentCamera.CoordinateFrame.p))*speed
				lastctrl = {f = ctrl.f, b = ctrl.b, l = ctrl.l, r = ctrl.r}
			elseif (ctrl.l + ctrl.r) == 0 and (ctrl.f + ctrl.b) == 0 and speed ~= 0 then
				bv.velocity = ((game.Workspace.CurrentCamera.CoordinateFrame.lookVector * (lastctrl.f+lastctrl.b)) + ((game.Workspace.CurrentCamera.CoordinateFrame * CFrame.new(lastctrl.l+lastctrl.r,(lastctrl.f+lastctrl.b)*.2,0).p) - game.Workspace.CurrentCamera.CoordinateFrame.p))*speed
			else
				bv.velocity = Vector3.new(0,0,0)
			end

			bg.cframe = game.Workspace.CurrentCamera.CoordinateFrame * CFrame.Angles(-math.rad((ctrl.f+ctrl.b)*50*speed/maxspeed),0,0)
		end
		ctrl = {f = 0, b = 0, l = 0, r = 0}
		lastctrl = {f = 0, b = 0, l = 0, r = 0}
		speed = 0
		bg:Destroy()
		bv:Destroy()
		plr.Character.Humanoid.PlatformStand = false
		plr.Character.Animate.Disabled = false
		tpwalking = false
	end
-- this end to big
end

if string.sub(txtexec.Text, 1, 6) == (Settings.Prefix.."unfly") then
txtexec.Text = ":fly 0"
txtexec:CaptureFocus()
wait(0.1)
txtexec:ReleaseFocus()
end



if string.sub(txtexec.Text, 1, 7) == (Settings.Prefix.."flygui") then
loadstring(game:HttpGet("https://gist.githubusercontent.com/meozoneYT/bf037dff9f0a70017304ddd67fdcd370/raw/e14e74f425b060df523343cf30b787074eb3c5d2/arceus%2520x%2520fly%25202%2520obflucator"))()
end

if string.sub(txtexec.Text, 1, 5) == (Settings.Prefix.."fly2") then
txtexec.Text = ":sit"
txtexec:CaptureFocus()
wait(0.1)
txtexec:ReleaseFocus()
wait(1)
txtexec.Text = ":fly 1"
txtexec:CaptureFocus()
wait(0.1)
txtexec:ReleaseFocus()
end

if string.sub(txtexec.Text, 1, 7) == (Settings.Prefix.."unview") then
game:GetService("Workspace").CurrentCamera.CameraSubject = plr.Character.Humanoid
end

if string.sub(txtexec.Text, 1, 8) == (Settings.Prefix.."chathax") then
loadstring(game:HttpGet("https://pastebin.com/raw/w5YvN4Rd"))()
end

if string.sub(txtexec.Text, 1, 6) == (Settings.Prefix.."view ") then
for i,v in pairs(gplr(string.sub(txtexec.Text, 7))) do
game:GetService("Workspace").CurrentCamera.CameraSubject = game:GetService("Players")[v.Name].Character
end
end

if string.sub(txtexec.Text, 1, 7) == (Settings.Prefix.."speed ") then
game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = string.sub(txtexec.Text, 8)
end

if string.sub(txtexec.Text, 1, 11) == (Settings.Prefix.."jumppower ") then
game.Players.LocalPlayer.Character.Humanoid.JumpPower = string.sub(txtexec.Text, 12)
end

if string.sub(txtexec.Text, 1, 5) == (Settings.Prefix.."swim") then
-- below is not my code
workspace.Gravity = 0

plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Climbing,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.FallingDown,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Flying,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Freefall,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.GettingUp,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Jumping,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Landed,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Physics,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.PlatformStanding,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Ragdoll,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Running,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.RunningNoPhysics,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.StrafingNoPhysics,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Swimming,false) plr.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Swimming)
end

if string.sub(txtexec.Text, 1, 7) == (Settings.Prefix.."unswim") then
workspace.Gravity = 195.96
plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Climbing,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.FallingDown,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Flying,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Freefall,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.GettingUp,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Jumping,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Landed,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Physics,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.PlatformStanding,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Ragdoll,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Running,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.RunningNoPhysics,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.StrafingNoPhysics,false) plr.Character.Humanoid:SetStateEnabled(Enum.HumanoidStateType.Swimming,false) plr.Character.Humanoid:ChangeState(Enum.HumanoidStateType.RunningNoPhysics)
end

if string.sub(txtexec.Text, 1, 8) == (Settings.Prefix.."placeid") then
setclipboard(tostring(game.PlaceId))
notify("PlaceId Copied To Clipboard.")
end

if string.sub(txtexec.Text, 1, 8) == (Settings.Prefix.."keepbar") then
Settings.keepcmdbar = true
Save()
cmdbar.Enabled = true
cmdframe.BackgroundTransparency = 0
end

if string.sub(txtexec.Text, 1, 10) == (Settings.Prefix.."unkeepbar") then
Settings.keepcmdbar = false
Save()
cmdbar.Enabled = false
end

if string.sub(txtexec.Text, 1, 7) == (Settings.Prefix.."getpos") then
setclipboard(tostring(game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame))
notify("Position Copied To Clipboard.")
end

if string.sub(txtexec.Text, 1, 8) == (Settings.Prefix.."savepos") then
savedpos = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart").CFrame
end

if string.sub(txtexec.Text, 1, 8) == (Settings.Prefix.."loadpos") then
game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart").CFrame = savedpos
end

if string.sub(txtexec.Text, 1, 12) == (Settings.Prefix.."spblockspam") then
anniblockspam = true
notify("StarterPlace block spam Enabled.\nUse ':unspblockspam' to stop")
end

if string.sub(txtexec.Text, 1, 14) == (Settings.Prefix.."unspblockspam") then
anniblockspam = false
notify("StarterPlace block spam Stopped.")
end

if string.sub(txtexec.Text, 1, 4) == (Settings.Prefix.."dex") then
loadstring(game:HttpGet("https://cdn.wearedevs.net/scripts/Dex%20Explorer.txt"))()
end

if string.sub(txtexec.Text, 1, 3) == (Settings.Prefix.."re") or string.sub(txtexec.Text, 1, 8) == (Settings.Prefix.."respawn") then
game.Players.LocalPlayer.Character.Humanoid.Health = "0"
end

end)

-- load settings lol
if Settings.keepcmdbar == true then
cbar.Enabled = true
cmdframe.BackgroundTransparency = 0
end

notify("Welcome\nKrunox v3")
wait(3)
notify("Defualt Prefix is ':' ")
wait(2)
notify("Press Qoute for CmdBar")


-- stuff for checking krunox users lollll


while true do
for i = 1, 360 do
thearrow.TextColor3 = Color3.fromHSV(i / 360, 1, 1)
task.wait()
end
end
