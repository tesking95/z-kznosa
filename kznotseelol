if KRXL == true then
local coroutine = coroutine
local yield = coroutine.yield
local create = coroutine.create
local running = coroutine.running

local cloneref = cloneref or function(instance)
    return instance
end

local function SafeGetService(service)
    return cloneref(game:GetService(service))
end


local function Create(instance, properties, children)
    local obj = Instance.new(instance)

    for i, v in next, properties or {} do
        obj[i] = v
        for _, child in next, children or {} do
            child.Parent = obj;
        end
    end
    return obj;
end

local CoreGui = SafeGetService("CoreGui")

local function ErrorPrompt(Message,state)
    if getrenv then
        local ErrorPrompt = getrenv().require(CoreGui:WaitForChild("RobloxGui"):WaitForChild("Modules"):WaitForChild("ErrorPrompt")) -- File can be located in your roblox folder (C:\Users\%Username%\AppData\Local\Roblox\Versions\whateverversionitis\ExtraContent\scripts\CoreScripts\Modules)
        local prompt = ErrorPrompt.new("Default",{HideErrorCode = true})
        local ErrorStoarge = Create("ScreenGui",{Parent = CoreGui,ResetOnSpawn = false})
        local thread = state and running()
        prompt:setParent(ErrorStoarge)
        prompt:setErrorTitle("KrunoxError")
        prompt:updateButtons({{
            Text = "Proceed",
            Callback = function()
                prompt:_close()
                ErrorStoarge:Destroy()
                if thread then
                    resume(thread)
                end
            end,
            Primary = true
        }}, 'Default')
        prompt:_open(Message)
        if thread then
            yield(thread)
        end
    else
        warn(Message)
    end
end
wait(1)
ErrorPrompt("Krunox Is Already Running!",true)
return
end

pcall(function() getgenv().KRXL = true end)

while not game:IsLoaded() or not game:GetService("CoreGui") or not game:GetService("Players").LocalPlayer or not game:GetService("Players").LocalPlayer.PlayerGui do wait() end

local kplr = game:GetService("Players").LocalPlayer
local uis = game:GetService("UserInputService")
anniblockspam = false
RunService = game:GetService("RunService")

game:GetService('RunService').Stepped:connect(function()
if anniblockspam then
game.workspace.Tools.Chest_Invisibility_Cloak.Part.CFrame = CFrame.new(kplr.Character.HumanoidRootPart.Position)

if kplr.Backpack:FindFirstChild("InvisibilityCloak") then
kplr.Character.Humanoid:EquipTool(kplr.Backpack.InvisibilityCloak)
else
end

if kplr.Character.InvisibilityCloak.Handle:FindFirstChild("Mesh") then
kplr.Character:FindFirstChild("InvisibilityCloak").Handle.Mesh:Destroy()
else
end
kplr.Character.InvisibilityCloak.Parent = workspace

end
end)

local cmdbar = Instance.new("ScreenGui")
local cmdframe = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local txtexec = Instance.new("TextBox")
local thearrow = Instance.new("TextLabel")

--Properties:

cmdbar.Parent = game.CoreGui
cmdbar.Enabled = false

cmdframe.Parent = cmdbar
cmdframe.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
cmdframe.BackgroundTransparency = 0
cmdframe.Position = UDim2.new(0.34, 0, 0.845029235, 0)
cmdframe.Size = UDim2.new(0, 260, 0, 34)

UICorner.Parent = cmdframe

txtexec.Parent = cmdframe
txtexec.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
txtexec.BackgroundTransparency = 1.000
txtexec.Position = UDim2.new(0.138461545, 0, -0.01, 0)
txtexec.Size = UDim2.new(0, 200, 0, 50)
txtexec.Font = Enum.Font.Gotham
txtexec.Text = ""
txtexec.TextColor3 = Color3.fromRGB(255, 255, 255)
txtexec.TextSize = 28.000
txtexec.TextWrapped = true
txtexec.TextXAlignment = Enum.TextXAlignment.Left
txtexec.TextYAlignment = Enum.TextYAlignment.Top
txtexec.ClearTextOnFocus = false
txtexec.PlaceholderText = "Enter CMD"

thearrow.Parent = cmdframe
thearrow.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
thearrow.BackgroundTransparency = 1.000
thearrow.Position = UDim2.new(-0.303846151, 0, -0.235293865, 0)
thearrow.Size = UDim2.new(0, 200, 0, 50)
thearrow.Font = Enum.Font.Code
thearrow.Text = ">"
thearrow.TextColor3 = Color3.fromRGB(255, 145, 19)
thearrow.TextSize = 37.000

local cmdsgui = Instance.new("ScreenGui")
local cmdframe = Instance.new("Frame")
local ScrollingFrame = Instance.new("ScrollingFrame")
local TextLabel = Instance.new("TextLabel")
local UICorner = Instance.new("UICorner")
local UICorner_2 = Instance.new("UICorner")
local Frame = Instance.new("Frame")
local UICorner_3 = Instance.new("UICorner")
local TextLabel_2 = Instance.new("TextButton")

cmdsgui.Name = "cmdsgui"
cmdsgui.Parent = game.CoreGui
cmdsgui.Enabled = false

cmdframe.Name = "cmdframe"
cmdframe.Parent = cmdsgui
cmdframe.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
cmdframe.Position = UDim2.new(0.5, 0, 0.5, 0)
cmdframe.AnchorPoint = Vector2.new(0.5, 0.5)
cmdframe.Size = UDim2.new(0, 190, 0, 300)
cmdframe.ZIndex = 0

ScrollingFrame.Parent = cmdframe
ScrollingFrame.Active = true
ScrollingFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ScrollingFrame.BackgroundTransparency = 1.000
ScrollingFrame.Position = UDim2.new(0, 0, 0.0799999982, 0)
ScrollingFrame.Size = UDim2.new(0, 190, 0, 270)

TextLabel.Parent = ScrollingFrame
TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.BackgroundTransparency = 1.000
TextLabel.Size = UDim2.new(0, 200, 0, 1000)
TextLabel.Font = Enum.Font.Gotham
TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.TextSize = 14.000
TextLabel.TextXAlignment = Enum.TextXAlignment.Left
TextLabel.TextYAlignment = Enum.TextYAlignment.Top
TextLabel.Text = "{1} flygui\n{2} killall (buggy)\n{3} kill [plr]\n{4} bring [plr]\n{5} voidall\n{6} bringall\n{7} walkspeed\n{8} fling\n{9} unfling\n{10} noclip\n{11} clip\n{12} walkspeed [val]\n{13} refresh\n{14} re\n{15} respawn\n{16} swim\n{17} unswim\n{18} to\n{19} dupetools [val] \n{20} savepos\n{21} loadpos\n{21} bkillall"

UICorner.Parent = ScrollingFrame

UICorner_2.Parent = cmdframe

Frame.Parent = cmdframe
Frame.BackgroundColor3 = Color3.fromRGB(19, 19, 19)
Frame.Size = UDim2.new(0, 190, 0, 23)

UICorner_3.Parent = Frame

TextLabel_2.Parent = Frame
TextLabel_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel_2.BackgroundTransparency = 1.000
TextLabel_2.Position = UDim2.new(0, 0, -0.600000024, 0)
TextLabel_2.Size = UDim2.new(0, 200, 0, 50)
TextLabel_2.Font = Enum.Font.SourceSans
TextLabel_2.Text = "KrunoxCommands    [X]"
TextLabel_2.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel_2.TextSize = 16.000

TextLabel_2.MouseButton1Click:Connect(function()
		cmdsgui.Enabled = false
	end)

local ScriptBloxSearcher = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local UICorner = Instance.new("UICorner")
local TopBarFrame = Instance.new("Frame")
local UICorner_2 = Instance.new("UICorner")
local SearchBox = Instance.new("TextBox")
local UICorner_3 = Instance.new("UICorner")
local Title = Instance.new("TextLabel")
local CloseButton = Instance.new("ImageButton")
local UICorner_4 = Instance.new("UICorner")
local ClearCacheButton = Instance.new("TextButton")
local UICorner_5 = Instance.new("UICorner")
local TopbarBottomCover = Instance.new("Frame")
local ScriptListFrame = Instance.new("ScrollingFrame")
local UIPadding = Instance.new("UIPadding")
local Scripts = Instance.new("Folder")
local UIGridLayout = Instance.new("UIGridLayout")
local ScriptFrame = Instance.new("Frame")
local UICorner_6 = Instance.new("UICorner")
local ScriptTitle = Instance.new("TextLabel")
local ExecuteButton = Instance.new("TextButton")
local UICorner_7 = Instance.new("UICorner")
local InfoButton = Instance.new("TextButton")
local UICorner_8 = Instance.new("UICorner")
local ScriptAuthor = Instance.new("TextLabel")
local ScriptGame = Instance.new("TextLabel")
local VerifiedScriptFrame = Instance.new("Frame")
local UICorner_9 = Instance.new("UICorner")
local ScriptTitle_2 = Instance.new("TextLabel")
local VerifiedIcon = Instance.new("ImageLabel")
local ExecuteButton_2 = Instance.new("TextButton")
local UICorner_10 = Instance.new("UICorner")
local InfoButton_2 = Instance.new("TextButton")
local UICorner_11 = Instance.new("UICorner")
local ScriptAuthor_2 = Instance.new("TextLabel")
local ScriptGame_2 = Instance.new("TextLabel")
local ScriptListBackgroundFrame = Instance.new("Frame")
local UICorner_12 = Instance.new("UICorner")
local NoScriptsFound = Instance.new("TextLabel")
local InfoBox = Instance.new("ScrollingFrame")
local UIListLayout = Instance.new("UIListLayout")
local UICorner_13 = Instance.new("UICorner")
local Info = Instance.new("Frame")
local PreviewImage = Instance.new("ImageLabel")
local UIScale = Instance.new("UIScale")
local UICorner_14 = Instance.new("UICorner")
local Author = Instance.new("Frame")
local InfoBoxAuthor = Instance.new("TextLabel")
local ProfilePicture = Instance.new("ImageLabel")
local UICorner_15 = Instance.new("UICorner")
local Title_2 = Instance.new("Frame")
local InfoBoxTitle = Instance.new("TextLabel")
local Game = Instance.new("TextLabel")
local Buttons = Instance.new("Frame")
local UIListLayout_2 = Instance.new("UIListLayout")
local Close = Instance.new("TextButton")
local UICorner_16 = Instance.new("UICorner")
local CopyScriptBloxLink = Instance.new("TextButton")
local UICorner_17 = Instance.new("UICorner")
local CopyScriptButton = Instance.new("TextButton")
local UICorner_18 = Instance.new("UICorner")
local ExecuteButton_3 = Instance.new("TextButton")
local UICorner_19 = Instance.new("UICorner")
local InfoBoxDescription = Instance.new("TextLabel")
local Comments = Instance.new("Frame")
local UICorner_20 = Instance.new("UICorner")
local Inner = Instance.new("Frame")
local UICorner_21 = Instance.new("UICorner")
local Line = Instance.new("Frame")
local CommentsText = Instance.new("TextLabel")
local Comments_2 = Instance.new("ScrollingFrame")
local Comment = Instance.new("Frame")
local Content = Instance.new("TextLabel")
local Author_2 = Instance.new("TextLabel")
local ProfilePicture_2 = Instance.new("ImageLabel")
local UICorner_22 = Instance.new("UICorner")
local UIListLayout_3 = Instance.new("UIListLayout")

ScriptBloxSearcher.Name = "ScriptBloxSearcher"
ScriptBloxSearcher.Parent = game:GetService("CoreGui")
ScriptBloxSearcher.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScriptBloxSearcher.ResetOnSpawn = false
ScriptBloxSearcher.Enabled = false

MainFrame.Name = "MainFrame"
MainFrame.Parent = ScriptBloxSearcher
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
MainFrame.Size = UDim2.new(0, 378, 0, 250)
MainFrame.ZIndex = 2

UIAspectRatioConstraint.Parent = MainFrame
UIAspectRatioConstraint.AspectRatio = 1.778

UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = MainFrame

TopBarFrame.Name = "TopBarFrame"
TopBarFrame.Parent = MainFrame
TopBarFrame.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
TopBarFrame.Size = UDim2.new(0, 378, 0, 300)
TopBarFrame.ZIndex = 2

UICorner_2.CornerRadius = UDim.new(0, 12)
UICorner_2.Parent = TopBarFrame

SearchBox.Name = "SearchBox"
SearchBox.Parent = TopBarFrame
SearchBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
SearchBox.Position = UDim2.new(0, 5, 0, 5)
SearchBox.Size = UDim2.new(0, 220, 0, 30)
SearchBox.ClearTextOnFocus = false
SearchBox.Font = Enum.Font.Gotham
SearchBox.PlaceholderText = "Search"
SearchBox.Text = ""
SearchBox.TextColor3 = Color3.fromRGB(0, 0, 0)
SearchBox.TextScaled = true
SearchBox.TextSize = 14.000
SearchBox.TextWrapped = true

UICorner_3.CornerRadius = UDim.new(0, 12)
UICorner_3.Parent = SearchBox

Title.Name = "Title"
Title.Parent = TopBarFrame
Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1.000
Title.Size = UDim2.new(0, 101, 0, 40)
Title.Font = Enum.Font.Gotham
Title.Text = "<font color=\"#8C7DFF\">Script</font>Blox"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 28.000

CloseButton.Name = "CloseButton"
CloseButton.Parent = TopBarFrame
CloseButton.BackgroundColor3 = Color3.fromRGB(214, 21, 24)
CloseButton.Position = UDim2.new(0, 340, 0, 5)
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.AutoButtonColor = false
CloseButton.Image = "rbxassetid://54479706"

UICorner_4.CornerRadius = UDim.new(0, 12)
UICorner_4.Parent = CloseButton

ClearCacheButton.Name = "ClearCacheButton"
ClearCacheButton.Parent = TopBarFrame
ClearCacheButton.BackgroundColor3 = Color3.fromRGB(39, 48, 88)
ClearCacheButton.Position = UDim2.new(0, 231, 0, 5)
ClearCacheButton.Size = UDim2.new(0, 100, 0, 30)
ClearCacheButton.AutoButtonColor = false
ClearCacheButton.Font = Enum.Font.GothamSemibold
ClearCacheButton.Text = "Clear Cache"
ClearCacheButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ClearCacheButton.TextSize = 24.000
ClearCacheButton.TextWrapped = true

UICorner_5.CornerRadius = UDim.new(0, 12)
UICorner_5.Parent = ClearCacheButton

TopbarBottomCover.Name = "TopbarBottomCover"
TopbarBottomCover.Parent = MainFrame
TopbarBottomCover.BackgroundColor3 = Color3.fromRGB(13, 18, 39)
TopbarBottomCover.BorderSizePixel = 0
TopbarBottomCover.LayoutOrder = 1
TopbarBottomCover.Position = UDim2.new(3.0063287e-08, 0, 0.0437828377, 0)
TopbarBottomCover.Size = UDim2.new(0, 378, 0, 15)
TopbarBottomCover.Visible = false

ScriptListFrame.Name = "ScriptListFrame"
ScriptListFrame.Parent = MainFrame
ScriptListFrame.Active = true
ScriptListFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ScriptListFrame.BackgroundTransparency = 1.000
ScriptListFrame.BorderSizePixel = 0
ScriptListFrame.Position = UDim2.new(0, 10, 0.0700000003, 10)
ScriptListFrame.Size = UDim2.new(0, 378, 0, 250)
ScriptListFrame.ZIndex = 2
ScriptListFrame.CanvasSize = UDim2.new(0, 0, 0, 0)

UIPadding.Parent = ScriptListFrame
UIPadding.PaddingBottom = UDim.new(0, 10)
UIPadding.PaddingLeft = UDim.new(0, 25)
UIPadding.PaddingRight = UDim.new(0, 25)
UIPadding.PaddingTop = UDim.new(0, 10)

Scripts.Name = "Scripts"
Scripts.Parent = ScriptListFrame

UIGridLayout.Parent = Scripts
UIGridLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIGridLayout.CellPadding = UDim2.new(0, 20, 0, 20)
UIGridLayout.CellSize = UDim2.new(0, 300, 0, 150)

ScriptFrame.Name = "ScriptFrame"
ScriptFrame.Parent = Scripts
ScriptFrame.BackgroundColor3 = Color3.fromRGB(11, 11, 11)
ScriptFrame.Size = UDim2.new(0, 300, 0, 150)

UICorner_6.CornerRadius = UDim.new(0, 12)
UICorner_6.Parent = ScriptFrame

ScriptTitle.Name = "ScriptTitle"
ScriptTitle.Parent = ScriptFrame
ScriptTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ScriptTitle.BackgroundTransparency = 1.000
ScriptTitle.Position = UDim2.new(0, 10, 0, 10)
ScriptTitle.Size = UDim2.new(0, 280, 0, 40)
ScriptTitle.Font = Enum.Font.Gotham
ScriptTitle.Text = "Script Title"
ScriptTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
ScriptTitle.TextScaled = true
ScriptTitle.TextSize = 14.000
ScriptTitle.TextWrapped = true
ScriptTitle.TextXAlignment = Enum.TextXAlignment.Left

ExecuteButton.Name = "ExecuteButton"
ExecuteButton.Parent = ScriptFrame
ExecuteButton.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
ExecuteButton.Position = UDim2.new(0.0399999991, 0, 0.733333349, 0)
ExecuteButton.Size = UDim2.new(0, 130, 0, 30)
ExecuteButton.AutoButtonColor = false
ExecuteButton.Font = Enum.Font.GothamBold
ExecuteButton.Text = "Execute"
ExecuteButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ExecuteButton.TextSize = 14.000

UICorner_7.CornerRadius = UDim.new(0, 12)
UICorner_7.Parent = ExecuteButton

InfoButton.Name = "InfoButton"
InfoButton.Parent = ScriptFrame
InfoButton.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
InfoButton.Position = UDim2.new(0.533333361, 0, 0.733333349, 0)
InfoButton.Size = UDim2.new(0, 130, 0, 30)
InfoButton.AutoButtonColor = false
InfoButton.Font = Enum.Font.GothamBold
InfoButton.Text = "Info"
InfoButton.TextColor3 = Color3.fromRGB(255, 255, 255)
InfoButton.TextSize = 14.000

UICorner_8.CornerRadius = UDim.new(0, 12)
UICorner_8.Parent = InfoButton

ScriptAuthor.Name = "ScriptAuthor"
ScriptAuthor.Parent = ScriptFrame
ScriptAuthor.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ScriptAuthor.BackgroundTransparency = 1.000
ScriptAuthor.Position = UDim2.new(0, 10, 0, 55)
ScriptAuthor.Size = UDim2.new(0, 280, 0, 25)
ScriptAuthor.Font = Enum.Font.Gotham
ScriptAuthor.Text = "by ScriptAuthor"
ScriptAuthor.TextColor3 = Color3.fromRGB(192, 192, 192)
ScriptAuthor.TextSize = 14.000
ScriptAuthor.TextWrapped = true
ScriptAuthor.TextXAlignment = Enum.TextXAlignment.Left

ScriptGame.Name = "ScriptGame"
ScriptGame.Parent = ScriptFrame
ScriptGame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ScriptGame.BackgroundTransparency = 1.000
ScriptGame.Position = UDim2.new(0, 10, 0, 80)
ScriptGame.Size = UDim2.new(0, 280, 0, 25)
ScriptGame.Font = Enum.Font.Gotham
ScriptGame.Text = "Game"
ScriptGame.TextColor3 = Color3.fromRGB(192, 192, 192)
ScriptGame.TextSize = 14.000
ScriptGame.TextWrapped = true
ScriptGame.TextXAlignment = Enum.TextXAlignment.Left

VerifiedScriptFrame.Name = "VerifiedScriptFrame"
VerifiedScriptFrame.Parent = Scripts
VerifiedScriptFrame.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
VerifiedScriptFrame.Size = UDim2.new(0, 300, 0, 150)

UICorner_9.CornerRadius = UDim.new(0, 12)
UICorner_9.Parent = VerifiedScriptFrame

ScriptTitle_2.Name = "ScriptTitle"
ScriptTitle_2.Parent = VerifiedScriptFrame
ScriptTitle_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ScriptTitle_2.BackgroundTransparency = 1.000
ScriptTitle_2.Position = UDim2.new(0, 50, 0, 10)
ScriptTitle_2.Size = UDim2.new(0, 240, 0, 40)
ScriptTitle_2.Font = Enum.Font.Gotham
ScriptTitle_2.Text = "Script Title"
ScriptTitle_2.TextColor3 = Color3.fromRGB(255, 255, 255)
ScriptTitle_2.TextScaled = true
ScriptTitle_2.TextSize = 14.000
ScriptTitle_2.TextWrapped = true
ScriptTitle_2.TextXAlignment = Enum.TextXAlignment.Left

VerifiedIcon.Name = "VerifiedIcon"
VerifiedIcon.Parent = VerifiedScriptFrame
VerifiedIcon.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
VerifiedIcon.BackgroundTransparency = 1.000
VerifiedIcon.Position = UDim2.new(0, 10, 0, 15)
VerifiedIcon.Size = UDim2.new(0, 30, 0, 30)
VerifiedIcon.Image = "rbxassetid://8240362117"

ExecuteButton_2.Name = "ExecuteButton"
ExecuteButton_2.Parent = VerifiedScriptFrame
ExecuteButton_2.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
ExecuteButton_2.Position = UDim2.new(0.0399999991, 0, 0.733333349, 0)
ExecuteButton_2.Size = UDim2.new(0, 130, 0, 30)
ExecuteButton_2.AutoButtonColor = false
ExecuteButton_2.Font = Enum.Font.GothamBold
ExecuteButton_2.Text = "Execute"
ExecuteButton_2.TextColor3 = Color3.fromRGB(255, 255, 255)
ExecuteButton_2.TextSize = 14.000

UICorner_10.CornerRadius = UDim.new(0, 12)
UICorner_10.Parent = ExecuteButton_2

InfoButton_2.Name = "InfoButton"
InfoButton_2.Parent = VerifiedScriptFrame
InfoButton_2.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
InfoButton_2.Position = UDim2.new(0.533333361, 0, 0.733333349, 0)
InfoButton_2.Size = UDim2.new(0, 130, 0, 30)
InfoButton_2.AutoButtonColor = false
InfoButton_2.Font = Enum.Font.GothamBold
InfoButton_2.Text = "Info"
InfoButton_2.TextColor3 = Color3.fromRGB(255, 255, 255)
InfoButton_2.TextSize = 14.000

UICorner_11.CornerRadius = UDim.new(0, 12)
UICorner_11.Parent = InfoButton_2

ScriptAuthor_2.Name = "ScriptAuthor"
ScriptAuthor_2.Parent = VerifiedScriptFrame
ScriptAuthor_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ScriptAuthor_2.BackgroundTransparency = 1.000
ScriptAuthor_2.Position = UDim2.new(0.0399999991, 0, 0.366666675, 0)
ScriptAuthor_2.Size = UDim2.new(0, 280, 0, 25)
ScriptAuthor_2.Font = Enum.Font.Gotham
ScriptAuthor_2.Text = "by ScriptAuthor"
ScriptAuthor_2.TextColor3 = Color3.fromRGB(192, 192, 192)
ScriptAuthor_2.TextSize = 14.000
ScriptAuthor_2.TextWrapped = true
ScriptAuthor_2.TextXAlignment = Enum.TextXAlignment.Left

ScriptGame_2.Name = "ScriptGame"
ScriptGame_2.Parent = VerifiedScriptFrame
ScriptGame_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ScriptGame_2.BackgroundTransparency = 1.000
ScriptGame_2.Position = UDim2.new(0, 10, 0, 80)
ScriptGame_2.Size = UDim2.new(0, 280, 0, 25)
ScriptGame_2.Font = Enum.Font.Gotham
ScriptGame_2.Text = "Game"
ScriptGame_2.TextColor3 = Color3.fromRGB(192, 192, 192)
ScriptGame_2.TextSize = 14.000
ScriptGame_2.TextWrapped = true
ScriptGame_2.TextXAlignment = Enum.TextXAlignment.Left

ScriptListBackgroundFrame.Name = "ScriptListBackgroundFrame"
ScriptListBackgroundFrame.Parent = MainFrame
ScriptListBackgroundFrame.BackgroundColor3 = Color3.fromRGB(13, 18, 39)
ScriptListBackgroundFrame.Position = UDim2.new(0, 10, 0.0700000003, 10)
ScriptListBackgroundFrame.Size = UDim2.new(0, 995, 0, 511)
ScriptListBackgroundFrame.Visible = false

UICorner_12.CornerRadius = UDim.new(0, 12)
UICorner_12.Parent = ScriptListBackgroundFrame

NoScriptsFound.Name = "No Scripts Found"
NoScriptsFound.Parent = MainFrame
NoScriptsFound.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
NoScriptsFound.BackgroundTransparency = 1.000
NoScriptsFound.Position = UDim2.new(3.0063287e-08, 10, 0.0700000003, 10)
NoScriptsFound.Size = UDim2.new(0, 995, 0, 509)
NoScriptsFound.Visible = false
NoScriptsFound.ZIndex = 3
NoScriptsFound.Font = Enum.Font.GothamSemibold
NoScriptsFound.Text = "No Scripts have been found!"
NoScriptsFound.TextColor3 = Color3.fromRGB(255, 0, 0)
NoScriptsFound.TextScaled = true
NoScriptsFound.TextSize = 100.000
NoScriptsFound.TextWrapped = true

InfoBox.Name = "InfoBox"
InfoBox.Parent = MainFrame
InfoBox.Active = true
InfoBox.BackgroundColor3 = Color3.fromRGB(13, 18, 39)
InfoBox.BorderSizePixel = 0
InfoBox.Position = UDim2.new(0, 10, 0, 50)
InfoBox.Size = UDim2.new(0, 378, 0, 250)
InfoBox.ZIndex = 3
InfoBox.CanvasSize = UDim2.new(2, 0, 1, 0)
InfoBox.VerticalScrollBarInset = Enum.ScrollBarInset.ScrollBar

UIListLayout.Parent = InfoBox
UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Padding = UDim.new(0, 10)

UICorner_13.CornerRadius = UDim.new(0, 12)
UICorner_13.Parent = InfoBox

Info.Name = "Info"
Info.Parent = InfoBox
Info.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Info.BackgroundTransparency = 1.000
Info.Size = UDim2.new(0, 995, 0, 207)

PreviewImage.Name = "PreviewImage"
PreviewImage.Parent = Info
PreviewImage.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
PreviewImage.BackgroundTransparency = 1.000
PreviewImage.Position = UDim2.new(0, 50, 0, 10)
PreviewImage.Size = UDim2.new(0, 480, 0, 270)
PreviewImage.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"

UIScale.Parent = PreviewImage
UIScale.Scale = 0.700

UICorner_14.CornerRadius = UDim.new(0, 24)
UICorner_14.Parent = PreviewImage

Author.Name = "Author"
Author.Parent = Info
Author.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Author.BackgroundTransparency = 1.000
Author.Position = UDim2.new(0, 395, 0, 110)
Author.Size = UDim2.new(0, 250, 0, 40)

InfoBoxAuthor.Name = "InfoBoxAuthor"
InfoBoxAuthor.Parent = Author
InfoBoxAuthor.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
InfoBoxAuthor.BackgroundTransparency = 1.000
InfoBoxAuthor.BorderSizePixel = 0
InfoBoxAuthor.Position = UDim2.new(0, 45, 0, 0)
InfoBoxAuthor.Size = UDim2.new(0, 150, 0, 40)
InfoBoxAuthor.Font = Enum.Font.Gotham
InfoBoxAuthor.Text = "Author"
InfoBoxAuthor.TextColor3 = Color3.fromRGB(140, 125, 233)
InfoBoxAuthor.TextSize = 20.000
InfoBoxAuthor.TextWrapped = true
InfoBoxAuthor.TextXAlignment = Enum.TextXAlignment.Left

ProfilePicture.Name = "ProfilePicture"
ProfilePicture.Parent = Author
ProfilePicture.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ProfilePicture.BackgroundTransparency = 1.000
ProfilePicture.Size = UDim2.new(0, 40, 0, 40)
ProfilePicture.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"

UICorner_15.CornerRadius = UDim.new(1, 0)
UICorner_15.Parent = ProfilePicture

Title_2.Name = "Title"
Title_2.Parent = Info
Title_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Title_2.BackgroundTransparency = 1.000
Title_2.Position = UDim2.new(0, 395, 0, 10)
Title_2.Size = UDim2.new(0, 550, 0, 50)

InfoBoxTitle.Name = "InfoBoxTitle"
InfoBoxTitle.Parent = Title_2
InfoBoxTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
InfoBoxTitle.BackgroundTransparency = 1.000
InfoBoxTitle.Size = UDim2.new(0, 550, 0, 50)
InfoBoxTitle.Font = Enum.Font.GothamSemibold
InfoBoxTitle.Text = "Script Title"
InfoBoxTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
InfoBoxTitle.TextScaled = true
InfoBoxTitle.TextSize = 14.000
InfoBoxTitle.TextWrapped = true
InfoBoxTitle.TextXAlignment = Enum.TextXAlignment.Left

Game.Name = "Game"
Game.Parent = Info
Game.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Game.BackgroundTransparency = 1.000
Game.Position = UDim2.new(0, 395, 0, 70)
Game.Size = UDim2.new(0, 250, 0, 25)
Game.Font = Enum.Font.Gotham
Game.Text = "Game Name"
Game.TextColor3 = Color3.fromRGB(255, 255, 255)
Game.TextSize = 22.000
Game.TextXAlignment = Enum.TextXAlignment.Left

Buttons.Name = "Buttons"
Buttons.Parent = InfoBox
Buttons.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Buttons.BackgroundTransparency = 1.000
Buttons.Position = UDim2.new(0.0100502511, 0, 0.911764622, 0)
Buttons.Size = UDim2.new(0, 975, 0, 35)

UIListLayout_2.Parent = Buttons
UIListLayout_2.FillDirection = Enum.FillDirection.Horizontal
UIListLayout_2.HorizontalAlignment = Enum.HorizontalAlignment.Center
UIListLayout_2.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout_2.VerticalAlignment = Enum.VerticalAlignment.Center
UIListLayout_2.Padding = UDim.new(0, 40)

Close.Name = "Close"
Close.Parent = Buttons
Close.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
Close.LayoutOrder = 3
Close.Position = UDim2.new(0, 735, 0, 465)
Close.Size = UDim2.new(0, 200, 0, 35)
Close.ZIndex = 2
Close.AutoButtonColor = false
Close.Font = Enum.Font.GothamBold
Close.Text = "Close"
Close.TextColor3 = Color3.fromRGB(255, 255, 255)
Close.TextSize = 14.000

UICorner_16.CornerRadius = UDim.new(0, 12)
UICorner_16.Parent = Close

CopyScriptBloxLink.Name = "CopyScriptBloxLink"
CopyScriptBloxLink.Parent = Buttons
CopyScriptBloxLink.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
CopyScriptBloxLink.LayoutOrder = 1
CopyScriptBloxLink.Position = UDim2.new(0, 505, 0, 465)
CopyScriptBloxLink.Size = UDim2.new(0, 200, 0, 35)
CopyScriptBloxLink.AutoButtonColor = false
CopyScriptBloxLink.Font = Enum.Font.GothamBold
CopyScriptBloxLink.Text = "Copy ScriptBlox Link"
CopyScriptBloxLink.TextColor3 = Color3.fromRGB(255, 255, 255)
CopyScriptBloxLink.TextSize = 14.000

UICorner_17.CornerRadius = UDim.new(0, 12)
UICorner_17.Parent = CopyScriptBloxLink

CopyScriptButton.Name = "CopyScriptButton"
CopyScriptButton.Parent = Buttons
CopyScriptButton.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
CopyScriptButton.LayoutOrder = 2
CopyScriptButton.Position = UDim2.new(0, 270, 0, 465)
CopyScriptButton.Size = UDim2.new(0, 200, 0, 35)
CopyScriptButton.AutoButtonColor = false
CopyScriptButton.Font = Enum.Font.GothamBold
CopyScriptButton.Text = "Copy Script"
CopyScriptButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CopyScriptButton.TextSize = 14.000

UICorner_18.CornerRadius = UDim.new(0, 12)
UICorner_18.Parent = CopyScriptButton

ExecuteButton_3.Name = "ExecuteButton"
ExecuteButton_3.Parent = Buttons
ExecuteButton_3.BackgroundColor3 = Color3.fromRGB(19, 24, 52)
ExecuteButton_3.Position = UDim2.new(0, 30, 0, 465)
ExecuteButton_3.Size = UDim2.new(0, 200, 0, 35)
ExecuteButton_3.AutoButtonColor = false
ExecuteButton_3.Font = Enum.Font.GothamBold
ExecuteButton_3.Text = "Execute"
ExecuteButton_3.TextColor3 = Color3.fromRGB(255, 255, 255)
ExecuteButton_3.TextSize = 14.000

UICorner_19.CornerRadius = UDim.new(0, 12)
UICorner_19.Parent = ExecuteButton_3

InfoBoxDescription.Name = "InfoBoxDescription"
InfoBoxDescription.Parent = InfoBox
InfoBoxDescription.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
InfoBoxDescription.BackgroundTransparency = 1.000
InfoBoxDescription.Size = UDim2.new(0, 378, 0, 0)
InfoBoxDescription.Font = Enum.Font.Gotham
InfoBoxDescription.Text = "This is a pretty cool description!"
InfoBoxDescription.TextColor3 = Color3.fromRGB(255, 255, 255)
InfoBoxDescription.TextSize = 20.000
InfoBoxDescription.TextWrapped = true
InfoBoxDescription.TextXAlignment = Enum.TextXAlignment.Left
InfoBoxDescription.TextYAlignment = Enum.TextYAlignment.Top

Comments.Name = "Comments"
Comments.Parent = InfoBox
Comments.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Comments.Size = UDim2.new(0, 950, 0, 200)

UICorner_20.CornerRadius = UDim.new(0, 12)
UICorner_20.Parent = Comments

Inner.Name = "Inner"
Inner.Parent = Comments
Inner.AnchorPoint = Vector2.new(0.5, 0.5)
Inner.BackgroundColor3 = Color3.fromRGB(13, 18, 39)
Inner.Position = UDim2.new(0.5, 0, 0.5, 0)
Inner.Size = UDim2.new(0, 946, 0, 196)

UICorner_21.CornerRadius = UDim.new(0, 12)
UICorner_21.Parent = Inner

Line.Name = "Line"
Line.Parent = Inner
Line.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Line.BorderSizePixel = 0
Line.LayoutOrder = 1
Line.Position = UDim2.new(0, 0, 0, 25)
Line.Size = UDim2.new(0, 946, 0, 2)

CommentsText.Name = "CommentsText"
CommentsText.Parent = Inner
CommentsText.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
CommentsText.BackgroundTransparency = 1.000
CommentsText.Size = UDim2.new(0, 976, 0, 25)
CommentsText.Font = Enum.Font.GothamBold
CommentsText.Text = "Comments"
CommentsText.TextColor3 = Color3.fromRGB(255, 255, 255)
CommentsText.TextSize = 14.000

Comments_2.Name = "Comments"
Comments_2.Parent = Inner
Comments_2.Active = true
Comments_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Comments_2.BackgroundTransparency = 1.000
Comments_2.BorderSizePixel = 0
Comments_2.Position = UDim2.new(0, 5, 0, 30)
Comments_2.Size = UDim2.new(0, 935, 0, 160)
Comments_2.CanvasSize = UDim2.new(0, 0, 0, 0)

Comment.Name = "Comment"
Comment.Parent = Comments_2
Comment.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Comment.BackgroundTransparency = 1.000
Comment.Size = UDim2.new(0, 920, 0, 50)

Content.Name = "Content"
Content.Parent = Comment
Content.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Content.BackgroundTransparency = 1.000
Content.Position = UDim2.new(0, 50, 0, 30)
Content.Size = UDim2.new(0, 880, 0, 20)
Content.Font = Enum.Font.Gotham
Content.Text = "Pretty Cool Comment"
Content.TextColor3 = Color3.fromRGB(255, 255, 255)
Content.TextSize = 14.000
Content.TextWrapped = true
Content.TextXAlignment = Enum.TextXAlignment.Left
Content.TextYAlignment = Enum.TextYAlignment.Top

Author_2.Name = "Author"
Author_2.Parent = Comment
Author_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Author_2.BackgroundTransparency = 1.000
Author_2.BorderSizePixel = 0
Author_2.Position = UDim2.new(0, 50, 0, 5)
Author_2.Size = UDim2.new(0, 200, 0, 25)
Author_2.Font = Enum.Font.GothamBold
Author_2.Text = "Author"
Author_2.TextColor3 = Color3.fromRGB(255, 255, 255)
Author_2.TextSize = 20.000
Author_2.TextWrapped = true
Author_2.TextXAlignment = Enum.TextXAlignment.Left

ProfilePicture_2.Name = "ProfilePicture"
ProfilePicture_2.Parent = Comment
ProfilePicture_2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ProfilePicture_2.BackgroundTransparency = 1.000
ProfilePicture_2.Position = UDim2.new(0, 5, 0, 5)
ProfilePicture_2.Size = UDim2.new(0, 40, 0, 40)
ProfilePicture_2.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"

UICorner_22.CornerRadius = UDim.new(1, 0)
UICorner_22.Parent = ProfilePicture_2

UIListLayout_3.Parent = Comments_2
UIListLayout_3.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout_3.Padding = UDim.new(0, 5)



assert(assert, "Assert couldn't assert itself! I think your computer might be broken.")

function createfolders(path)
	local pathtbl = string.split(path, "/")
	for i, v in pairs(pathtbl) do
		if i == 1 then
			if not isfolder(v) then
				makefolder(v)
			end
		else
			local newpath = pathtbl[1]
			for i2=2, i-1 do
				newpath = newpath.. "/" ..pathtbl[i2]
			end
			newpath = newpath.. "/" ..v
			if not isfolder(newpath) then
				makefolder(newpath)
			end
		end
	end
end

if not isfile("ScriptBlox/Searcher/Cache.json") and isfolder("ScriptBlox") then
	delfolder("ScriptBlox")
end

createfolders("ScriptBlox/Searcher/ImageCache/Scripts")
createfolders("ScriptBlox/Searcher/ImageCache/ProfilePictures")

if not isfile("ScriptBlox/Searcher/Cache.json") then
	writefile("ScriptBlox/Searcher/Cache.json", "{}")
end

ScriptBloxSearcher.MainFrame.InfoBox.Visible = false

local getfakeasset = getcustomasset or getsynasset

local HttpService = game:GetService("HttpService")
local TweenService = game:GetService("TweenService")
local TextService = game:GetService("TextService")

local cache = HttpService:JSONDecode(readfile("ScriptBlox/Searcher/Cache.json"))

local page = 1
local gquery = ""

function tableConcat(t1,t2)
	for i, v in pairs(t2) do
		table.insert(t1, v)
	end
	return t1
end

-- UI Conversion Fixes
ScriptBloxSearcher.MainFrame.TopBarFrame.Title.RichText = true
ScriptBloxSearcher.MainFrame.ScriptListFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
ScriptBloxSearcher.MainFrame.InfoBox.InfoBoxDescription.AutomaticSize = Enum.AutomaticSize.Y
ScriptBloxSearcher.MainFrame.ScriptListFrame.ScrollBarImageColor3 = Color3.fromRGB(0, 0, 0)
ScriptBloxSearcher.MainFrame.InfoBox.AutomaticCanvasSize = Enum.AutomaticSize.Y
ScriptBloxSearcher.MainFrame.InfoBox.Comments.Inner.Comments.AutomaticCanvasSize = Enum.AutomaticSize.Y
ScriptBloxSearcher.MainFrame.InfoBox.Comments.Inner.Comments.ScrollBarImageColor3 = Color3.new(0, 0, 0)
ScriptBloxSearcher.MainFrame.InfoBox.ScrollBarImageColor3 = Color3.new(0, 0, 0)

-- Templates
local VerifiedScript = ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts.VerifiedScriptFrame:Clone()
local Script = ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts.ScriptFrame:Clone()
ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts.ScriptFrame:Destroy()
ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts.VerifiedScriptFrame:Destroy()

local Comment = ScriptBloxSearcher.MainFrame.InfoBox.Comments.Inner.Comments.Comment:Clone()
ScriptBloxSearcher.MainFrame.InfoBox.Comments.Inner.Comments.Comment:Destroy()

-- Hover transition function
function setHoverTransition(from, to, obj)
	from = from or obj.BackgroundColor3
	
	obj.MouseEnter:Connect(function()

		TweenService:Create(obj, TweenInfo.new(0.2, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut), {
			BackgroundColor3 = to
		}):Play()

	end)
	
	obj.MouseLeave:Connect(function()

		TweenService:Create(obj, TweenInfo.new(0.2, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut), {
			BackgroundColor3 = from
		}):Play()

	end)
end

-- Info Box Hover Trabsitions
setHoverTransition(nil, Color3.new(0.152941, 0.188235, 0.345098), ScriptBloxSearcher.MainFrame.InfoBox.Buttons.ExecuteButton)
setHoverTransition(nil, Color3.new(0.152941, 0.188235, 0.345098), ScriptBloxSearcher.MainFrame.InfoBox.Buttons.Close)
setHoverTransition(nil, Color3.new(0.152941, 0.188235, 0.345098), ScriptBloxSearcher.MainFrame.InfoBox.Buttons.CopyScriptBloxLink)
setHoverTransition(nil, Color3.new(0.152941, 0.188235, 0.345098), ScriptBloxSearcher.MainFrame.InfoBox.Buttons.CopyScriptButton)

function _if(a, b, c)
	if a then return b else return c end
end

function fastmodeExec(func)
	if getgenv().fastmode == true then
		task.spawn(func)
	else
		func()
	end
end

-- fetchScripts function
function fetchScripts(query, page)
	page = page or 1
	query = HttpService:UrlEncode(query)
	
	local url = _if(query == "", "https://www.scriptblox.com/api/script/fetch?page="..tostring(page), "https://scriptblox.com/api/script/search?q="..query.."&max=100&mode=free&page=".. tostring(page))
	local req = HttpService:JSONDecode(game:HttpGetAsync(url)).result
	
	return req.scripts
end

function fetchComments(scriptId, page)
	page = page or 1	
	
	local url = "https://scriptblox.com/api/comment/" ..scriptId.. "?page=" ..tostring(page).. "&max=20"
	local req = HttpService:JSONDecode(game:HttpGetAsync(url)).result
	
	return req.comments
end

function loadImage(url, id, ispfp)
	ispfp = _if(type(ispfp) == "boolean", ispfp, false)
	
	local path = "ScriptBlox/Searcher/ImageCache/" .._if(ispfp, "ProfilePictures/", "Scripts/")..id..".png"
	
	if table.find(string.split(url, "/"), "user-default.png") then
		path = "ScriptBlox/Searcher/ImageCache/ProfilePictures/user-default.png"
	end
	
	if isfile(path) then
		return getfakeasset(path)
	else
		local img = game:HttpGetAsync(url)
		writefile(path, img)
		
		return getfakeasset(path)
	end
end

function fixScript(scriptObj)
	if not scriptObj["script"] or not scriptObj["owner"] or not scriptObj["features"] then
		local cacheObj = cache[scriptObj["_id"]]
		if cacheObj then
			scriptObj["script"] = _if(scriptObj["script"], scriptObj["script"], cacheObj.script)
			scriptObj["features"] = _if(scriptObj["features"], scriptObj["features"], cacheObj.features)
			scriptObj["owner"] = _if(scriptObj["owner"], scriptObj["owner"], cacheObj.owner)
		else
			local req = HttpService:JSONDecode(game:HttpGetAsync("https://www.scriptblox.com/api/script/".. scriptObj.slug)).script
			scriptObj["script"] = _if(scriptObj["script"], scriptObj["script"], req.script)
			scriptObj["features"] = _if(scriptObj["features"], scriptObj["features"], req.features)
			scriptObj["owner"] = _if(scriptObj["owner"], scriptObj["owner"], req.owner)
			
			cache[scriptObj["_id"]] = req
		end
	end
	return scriptObj
end

function updateCache(newCache)
	cache = newCache
	writefile("ScriptBlox/Searcher/Cache.json", HttpService:JSONEncode(cache))
end

function updateInfoBox(scriptObj)
	scriptObj = fixScript(scriptObj)
	
	ScriptBloxSearcher.MainFrame.InfoBox.Info.Author.InfoBoxAuthor.Text = scriptObj.owner.username
	ScriptBloxSearcher.MainFrame.InfoBox.Info.Title.InfoBoxTitle.Text = scriptObj.title
	ScriptBloxSearcher.MainFrame.InfoBox.Info.Game.Text = scriptObj.game.name
	ScriptBloxSearcher.MainFrame.InfoBox.InfoBoxDescription.Text = scriptObj.features or "For features to be displayed, please use the search bar to find this script and then open the info again, this is caused by an API Error that I will fix later."
	
	task.spawn(function()
		ScriptBloxSearcher.MainFrame.InfoBox.Info.Author.ProfilePicture.Image = loadImage("https://scriptblox.com"..scriptObj.owner.profilePicture, scriptObj["owner"]["_id"], true)
	end)
	task.spawn(function()
		ScriptBloxSearcher.MainFrame.InfoBox.Info.PreviewImage.Image = loadImage(_if(string.find(scriptObj.game.imageUrl, "rbxcdn.com"), scriptObj.game.imageUrl, "https://scriptblox.com"..scriptObj.game.imageUrl), scriptObj["_id"], false)
	end)
	
	local ExecuteConnection
	local CopyLinkConnection
	local CopyScriptConnection
	
	ExecuteConnection = ScriptBloxSearcher.MainFrame.InfoBox.Buttons.ExecuteButton.MouseButton1Click:Connect(function()
		loadstring(scriptObj.script)()
	end)
	
	CopyLinkConnection = ScriptBloxSearcher.MainFrame.InfoBox.Buttons.CopyScriptBloxLink.MouseButton1Click:Connect(function()
		setclipboard("https://scriptblox.com/script/".. scriptObj.slug)
	end)
	
	CopyScriptConnection = ScriptBloxSearcher.MainFrame.InfoBox.Buttons.CopyScriptButton.MouseButton1Click:Connect(function()
		setclipboard(scriptObj.script)
	end)
	
	ScriptBloxSearcher.MainFrame.InfoBox.Buttons.Close.MouseButton1Click:Connect(function()
		ExecuteConnection:Disconnect()
		CopyLinkConnection:Disconnect()
		CopyScriptConnection:Disconnect()
		
		ScriptBloxSearcher.MainFrame.InfoBox.Visible = false
		ScriptBloxSearcher.MainFrame.ScriptListFrame.Visible = true
	end)
	
	local commentsUIListLayout = ScriptBloxSearcher.MainFrame.InfoBox.Comments.Inner.Comments.UIListLayout:Clone()
	ScriptBloxSearcher.MainFrame.InfoBox.Comments.Inner.Comments:ClearAllChildren()
	commentsUIListLayout.Parent = ScriptBloxSearcher.MainFrame.InfoBox.Comments.Inner.Comments
	
	task.spawn(function()
		for _, v in pairs(fetchComments(scriptObj["_id"])) do

			local newComment = Comment:Clone()
			newComment.Parent = ScriptBloxSearcher.MainFrame.InfoBox.Comments.Inner.Comments
			newComment.Content.Text = v.text
			newComment.Author.Text = v.commentBy.username

			task.spawn(function()
				newComment.ProfilePicture.Image = loadImage("https://scriptblox.com"..v.commentBy.profilePicture, v.commentBy["_id"], true)
			end)

		end
	end)
end

-- Refresh Scripts Browser with new scripts
function refreshScripts(scriptTbl)
	if #scriptTbl <= 0 then
		ScriptBloxSearcher.MainFrame["No Scripts Found"].Visible = true
		return
	else
		ScriptBloxSearcher.MainFrame["No Scripts Found"].Visible = false
	end
	
	local UIGridLayoutCopy = ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts.UIGridLayout:Clone()
	ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts:ClearAllChildren()
	UIGridLayoutCopy.Parent = ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts
	
	addScripts(scriptTbl)
end

function addScripts(scriptTbl)
	for i, v in pairs(scriptTbl) do
		fastmodeExec(function()
			local newScript

			v = fixScript(v)

			if v.verified == true then
				newScript = VerifiedScript:Clone()
				newScript.ScriptTitle.Text = v.title
				newScript.ScriptAuthor.Text = "by ".. v.owner.username
				newScript.ScriptGame.Text = v.game.name
				newScript.Parent = ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts
			else
				newScript = Script:Clone()
				newScript.ScriptTitle.Text = v.title
				newScript.ScriptAuthor.Text = "by ".. v.owner.username
				newScript.ScriptGame.Text = v.game.name
				newScript.Parent = ScriptBloxSearcher.MainFrame.ScriptListFrame.Scripts
			end

			-- Execute Button
			newScript.ExecuteButton.MouseButton1Click:Connect(function()
				loadstring(v.script)()
			end)

			setHoverTransition(newScript.ExecuteButton.BackgroundColor3, Color3.new(0.152941, 0.188235, 0.345098), newScript.ExecuteButton)

			-- Info Button
			newScript.InfoButton.MouseButton1Click:Connect(function()
				updateInfoBox(v)
				task.wait()
				ScriptBloxSearcher.MainFrame.InfoBox.Visible = true
				ScriptBloxSearcher.MainFrame.ScriptListFrame.Visible = false
			end)

			setHoverTransition(newScript.InfoButton.BackgroundColor3, Color3.new(0.152941, 0.188235, 0.345098), newScript.InfoButton)

			-- Background
			setHoverTransition(newScript.BackgroundColor3, Color3.new(0.254902, 0.317647, 0.576471), newScript)
		end)
	end
	
	updateCache(cache)
	
	pagefetchrunning = false
end



-- Search Bar
ScriptBloxSearcher.MainFrame.TopBarFrame.SearchBox.FocusLost:Connect(function(enterPressed)
	if enterPressed then
		gquery = ScriptBloxSearcher.MainFrame.TopBarFrame.SearchBox.Text
		page = 1
		local scriptsTbl = fetchScripts(ScriptBloxSearcher.MainFrame.TopBarFrame.SearchBox.Text, 1)
		refreshScripts(scriptsTbl)
	end
end)

-- Closing
ScriptBloxSearcher.MainFrame.TopBarFrame.CloseButton.MouseButton1Click:Connect(function()
	ScriptBloxSearcher.Enabled = false
end)
setHoverTransition(nil, Color3.fromRGB(214, 71, 74), ScriptBloxSearcher.MainFrame.TopBarFrame.CloseButton)

-- Clear Cache
ScriptBloxSearcher.MainFrame.TopBarFrame.ClearCacheButton.MouseButton1Click:Connect(function()
	updateCache({})
	for _, v in pairs(listfiles("ScriptBlox/Searcher/ImageCache/ProfilePictures")) do
		delfile(_if(string.find(v, "ScriptBlox"), v, "ScriptBlox/Searcher/ImageCache/ProfilePictures/"..v))
	end
	for _, v in pairs(listfiles("ScriptBlox/Searcher/ImageCache/Scripts")) do
		delfile(_if(string.find(v, "ScriptBlox"), v, "ScriptBlox/Searcher/ImageCache/Scripts/"..v))
	end
end)
setHoverTransition(nil, Color3.new(0.254902, 0.317647, 0.576471), ScriptBloxSearcher.MainFrame.TopBarFrame.ClearCacheButton)

-- Dragging
local UserInputService = game:GetService("UserInputService")
local gui = ScriptBloxSearcher.MainFrame

local dragging
local dragInput
local dragStart
local startPos

local function update(input)
	local delta = input.Position - dragStart
	gui.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

gui.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = gui.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

gui.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		update(input)
	end
end)

refreshScripts(fetchScripts(gquery, 1))

ScriptBloxSearcher.MainFrame.ScriptListFrame:GetPropertyChangedSignal("CanvasPosition"):Connect(function()
	if (ScriptBloxSearcher.MainFrame.ScriptListFrame.CanvasPosition.Y + ScriptBloxSearcher.MainFrame.ScriptListFrame.AbsoluteSize.Y) >= ScriptBloxSearcher.MainFrame.ScriptListFrame.AbsoluteCanvasSize.Y -200 and not pagefetchrunning then
		page = page + 1
		pagefetchrunning = true
		addScripts(fetchScripts(gquery, page))
	end
end)


local maingui = Instance.new("ScreenGui")
local TextButton = Instance.new("TextButton")
local TextButton_2 = Instance.new("TextButton")
local TextButton_3 = Instance.new("TextButton")
local TextButton_4 = Instance.new("TextButton")
local open = Instance.new("TextButton")
local UICorner_1 = Instance.new("UICorner")
local UICorner_2 = Instance.new("UICorner")
local UICorner_3 = Instance.new("UICorner")
local UICorner_4 = Instance.new("UICorner")
local UICorner_5 = Instance.new("UICorner")
local Frame = Instance.new("Frame")

maingui.Name = "maingui"
maingui.Parent = game.CoreGui
maingui.Enabled = true

TextButton.Parent = maingui
TextButton.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
TextButton.Position = UDim2.new(0.01, 0, 0.290350878, 0)
TextButton.Size = UDim2.new(0, 200, 0, 50)
TextButton.Font = Enum.Font.Gotham
TextButton.TextColor3 = Color3.fromRGB(255, 255, 255)
TextButton.TextSize = 14.000
TextButton.BorderSizePixel = 0
TextButton.Text = "Executor"
TextButton.Visible = false
UICorner_1.Parent = TextButton

TextButton_2.Parent = maingui
TextButton_2.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
TextButton_2.Position = UDim2.new(0.01, 0, 0.41, 0)
TextButton_2.Size = UDim2.new(0, 200, 0, 50)
TextButton_2.Font = Enum.Font.SourceSans
TextButton_2.TextColor3 = Color3.fromRGB(255, 255, 255)
TextButton_2.TextSize = 14.000
TextButton_2.BorderSizePixel = 0
TextButton_2.Text = "Script Browser"
TextButton_2.Visible = false
UICorner_2.Parent = TextButton_2

TextButton_3.Parent = maingui
TextButton_3.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
TextButton_3.Position = UDim2.new(0.01, 0, 0.53, 0)
TextButton_3.Size = UDim2.new(0, 200, 0, 50)
TextButton_3.Font = Enum.Font.SourceSans
TextButton_3.TextColor3 = Color3.fromRGB(255, 255, 255)
TextButton_3.TextSize = 14.000
TextButton_3.BorderSizePixel = 0
TextButton_3.Text = "Settings"
TextButton_3.Visible = false
UICorner_3.Parent = TextButton_3

TextButton_4.Parent = maingui
TextButton_4.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
TextButton_4.Position = UDim2.new(0.01, 0, 0.65, 0)
TextButton_4.Size = UDim2.new(0, 200, 0, 50)
TextButton_4.Font = Enum.Font.SourceSans
TextButton_4.TextColor3 = Color3.fromRGB(255, 255, 255)
TextButton_4.TextSize = 14.000
TextButton_4.BorderSizePixel = 0
TextButton_4.Text = "Close"
TextButton_4.Visible = false
UICorner_4.Parent = TextButton_4

open.Parent = maingui
open.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
open.Position = UDim2.new(0.01, 0, 0.9, 0)
open.Size = UDim2.new(0, 70, 0, 50)
open.Font = Enum.Font.SourceSans
open.TextColor3 = Color3.fromRGB(255, 255, 255)
open.TextSize = 14.000
open.BorderSizePixel = 0
open.Text = "Menu"
UICorner_5.Parent = open

Frame.Parent = maingui
Frame.BackgroundColor3 = Color3.fromRGB(9, 9, 9)
Frame.Position = UDim2.new(0.744548321, 0, 0.207602322, 0)
Frame.Size = UDim2.new(0, 400, 0, 300)
Frame.Visible = false

blur = Instance.new("BlurEffect", game.Lighting)
blur.Size = 0

TextButton_2.MouseButton1Click:connect(function()
ScriptBloxSearcher.Enabled = true
end)

TextButton_4.MouseButton1Click:connect(function()
TextButton.Visible = false
wait(0.20)
TextButton_2.Visible = false
wait(0.20)
TextButton_3.Visible = false
wait(0.20)
TextButton_4.Visible = false
blur.Size = 0
end)

open.MouseButton1Click:connect(function()
blur.Size = 35
TextButton.Visible = true
wait(0.20)
TextButton_2.Visible = true
wait(0.20)
TextButton_3.Visible = true
wait(0.20)
TextButton_4.Visible = true
end)

uis.InputBegan:Connect(function(input)
if input.KeyCode == Enum.KeyCode.Quote then
cmdbar.Enabled = true
txtexec:CaptureFocus()
end
end)

local Name = "KRXL.ts"

local DefaultSettings = {
Aimbot = false,
Prefix = ":",
keepbar = false,
ESP = true
}

local Settings

if not pcall(function() readfile(Name) end) then 
writefile(Name, 
game:service'HttpService':JSONEncode(DefaultSettings)) end

Settings = game:service'HttpService':JSONDecode(readfile(Name))

local function Save()
writefile(Name,game:service'HttpService':JSONEncode(Settings))
end

local coreGui = game.CoreGui
local slideFrame = Instance.new("Frame")
local slideGui = Instance.new("ScreenGui")
local uil = Instance.new('UIListLayout')

slideGui.Parent = coreGui
slideGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

slideFrame.Parent = slideGui
slideFrame.BackgroundTransparency = 1
slideFrame.BackgroundColor3 = Color3.fromRGB(255,255,255)
slideFrame.BorderSizePixel = 0
slideFrame.ClipsDescendants = false
slideFrame.Size = UDim2.new(.5,0,.5,0)
slideFrame.Position = UDim2.new(0.008,0,0.48,0)
slideFrame.ClipsDescendants = true

uil.Parent = slideFrame
uil.VerticalAlignment = "Bottom"

function Tween(obj, dist, time)
    local tween = game:GetService("TweenService")
    local ti = TweenInfo.new(time, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)
    local tw = tween:Create(obj, ti, dist)
    tw:Play()
end

function respawn(plr)
	local char = plr.Character
	if char:FindFirstChildOfClass("Humanoid") then char:FindFirstChildOfClass("Humanoid"):ChangeState(15) end
	char:ClearAllChildren()
	local newChar = Instance.new("Model")
	newChar.Parent = workspace
	plr.Character = newChar
	wait()
	plr.Character = char
	newChar:Destroy()
end

function runCmd(comd)
game.Players:Chat(":"..comd)
end

function getRoot(char)
local rootPart = char:FindFirstChild('HumanoidRootPart') or char:FindFirstChild('Torso') or char:FindFirstChild('UpperTorso')
return rootPart
end

function isNumber(str)
	if tonumber(str) ~= nil or str == 'inf' then
		return true
	end
end

local refreshCmd = false
function refresh(plr)
	refreshCmd = true
	local Human = plr.Character and plr.Character:FindFirstChildOfClass("Humanoid", true)
	local pos = Human and Human.RootPart and Human.RootPart.CFrame
	local pos1 = workspace.CurrentCamera.CFrame
	respawn(plr)
	task.spawn(function()
		plr.CharacterAdded:Wait():WaitForChild("Humanoid").RootPart.CFrame, workspace.CurrentCamera.CFrame = pos, wait() and pos1
		refreshCmd = false
	end)
end

local function tpall()
for i, player in ipairs(game:GetService("Players"):GetPlayers()) do
if player.Character and player.Character:FindFirstChild("HumanoidRootPart")then 
player.Character.HumanoidRootPart.CFrame = kplr.Character.HumanoidRootPart.CFrame + kplr.Character.HumanoidRootPart.CFrame.lookVector * 1
end
end
end

spawn(function()
while wait() do
if cbringall == true then
tpall()
end
end
end)

function GetPlayer(target)
        local plrs = game:GetService("Players"):GetPlayers()
        if target:lower() == "all" then
                return plrs
        elseif target:lower() == "others" then
                for index, plr in pairs(plrs) do
                        if plr == game:GetService("Players").LocalPlayer then
                                table.remove(plrs, index)
                                return plrs
                        end
                end
        elseif target:lower() == "me" then
                return {
                        game:GetService("Players").LocalPlayer
                }
        else
                local plrTargets = {}
                for index, plr in pairs(plrs) do
                        if plr.Name:sub(1, #target):lower() == target:lower() or plr.DisplayName:sub(1, #target):lower() == target:lower() then
                                table.insert(plrTargets, plr)
                        end
                end
                return plrTargets
        end
end

function rhumanoid()
local hum = kplr.Character:FindFirstChildOfClass("Humanoid")
hum.Name = "1"
local newHum = hum:Clone()
newHum.Parent = kplr.Character
newHum.Name = "Humanoid"
wait()
hum:Destroy()
workspace.CurrentCamera.CameraSubject = kplr.Character
newHum.DisplayDistanceType = "None"
end

function Notify(Text,messageType)
    local notifText = Instance.new("TextLabel")
    local notifText2 = Instance.new("TextLabel")

    notifText.Parent = slideFrame
    notifText.BackgroundColor3 = Color3.fromRGB(255,255,255)
    notifText.BackgroundTransparency = 1
    notifText.BorderSizePixel = 0
    notifText.Position = UDim2.new(0,0,0,0)
    notifText.Size = UDim2.new(1,0,0.1,0)
    notifText.Font = Enum.Font.Gotham
    notifText.TextTransparency = 0
    if messageType == 'error' then
        notifText.Text = "[Error]: "..Text
        notifText.TextColor3 = Color3.fromRGB(255, 50, 50)
    else
        notifText.Text = "[Notification]: "..Text
        notifText.TextColor3 = Color3.fromRGB(255,255,255)
    end
    notifText.TextSize = 15.000
    notifText.TextXAlignment = Enum.TextXAlignment.Left
    notifText.TextWrapped = true
    notifText.TextStrokeTransparency = 0
    notifText.TextStrokeColor3 = Color3.fromRGB(0,0,0)
coroutine.wrap(function()
    wait(15)
    local Info = TweenInfo.new(1)
    local Tween = game:GetService("TweenService"):Create(notifText,Info,{TextTransparency=1})
    Tween:Play()
    local Info = TweenInfo.new(1)
    local Tween = game:GetService("TweenService"):Create(notifText,Info,{TextStrokeTransparency=1})
    Tween:Play()
    wait(1)
    notifText:Destroy()
end)()
end

local Commands = {}
function AddCommand(CmdName, func)
        Commands[CmdName] = CmdName
        kplr.Chatted:Connect(function(msg)
                msg = msg:lower()
                args = msg:split(' ')
                if args[1] == Settings.Prefix..CmdName then
                        
                        wait()
                        local success, err = pcall(function()
                                coroutine.wrap(function()
                                        func()
                                end)()
                        end)
                        if success then
                                if args[2] then
                                        Notify("Executed command: "..CmdName.." "..args[2])
                                else
                                        Notify("Executed command: "..CmdName)
                                end
                        end
                        if err then
                                Notify(err,'error')
                        end
                end

        end)
        txtexec.FocusLost:Connect(function(text)
                if text then
                        text = txtexec.Text:lower()
                        args = text:split(' ')
                        if args[1] == Commands[CmdName] then

                                wait()
                                local success, err = pcall(function()
                                        coroutine.wrap(function()
                                                func()
                                        end)()
                                end)
                                if success then
                                        if args[2] then
                                                Notify("Executed command: "..CmdName.." "..args[2])
if Settings.keepbar then
txtexec.Text = ""
else
cmdbar.Enabled = false
txtexec.Text = ""
end
                                        else
                                                Notify("Executed command: "..CmdName)
if Settings.keepbar then
txtexec.Text = ""
else
cmdbar.Enabled = false
txtexec.Text = ""
end
                                        end
                                end
                                if err then
                                        Notify(err,'error')
                                end
                        end
                end
        end)
end

AddCommand("spblockspam", function()
        anniblockspam = true
Notify("StarterPlace Block Spam Enabled\nUse 'unspblockspam' To Stop")
end)

AddCommand("unspblockspam", function()
        anniblockspam = false
Notify("StarterPlace Block Spam Disabled")
end)

AddCommand("kill", function()
for _, Target in pairs(GetPlayer(args[2])) do
local Player = game.Players:FindFirstChild(Target.Name)
savedpos = kplr.Character:FindFirstChild("HumanoidRootPart").CFrame
rhumanoid()
for i,v in pairs(game:GetService'Players'.LocalPlayer.Backpack:GetChildren()) do
kplr.Character.Humanoid:EquipTool(v)
end
local Tool = kplr.Character:FindFirstChildOfClass("Tool")
repeat wait()
kplr.Character.HumanoidRootPart.CFrame = Target.Character.HumanoidRootPart.CFrame
until Tool.Parent ~= kplr.Character
kplr.Character.Humanoid.Health = 0
kplr.Character = nil
kplr.CharacterAdded:Wait():WaitForChild("HumanoidRootPart").CFrame = savedpos
end
end)

AddCommand("killall", function()
     local player_table = game:GetService('Players'):GetPlayers()
        local toolsInBackpack = 0
        local toolsEquipped = 0
        local players = {}
        local tools = {}
        
        for i,v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
                toolsInBackpack = toolsInBackpack + 1
        end
        for i,v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do
                if v.ClassName == "Tool" then
                        toolsEquipped = toolsEquipped + 1
                end
        end
        local total_tools = toolsInBackpack + toolsEquipped
        print(#player_table.." players")
        
                for i,v in next, player_table do
                        if v.Character.Humanoid.Sit ~= true and v ~= game:GetService('Players').LocalPlayer and v.Character.Humanoid.Health ~= 0 then
                                table.insert(players, v)
                        end
                end 
        
                local newHum = game.Players.LocalPlayer.Character.Humanoid:Clone()
                newHum.Parent = game.Players.LocalPlayer.Character
                game.Players.LocalPlayer.Character.Humanoid:Destroy()
                newHum:ChangeState(15)
                for i,v in next, game.Players.LocalPlayer.Backpack:GetChildren() do
                        if v:IsA'Tool' then
                                v.Parent = game.Players.LocalPlayer.Character
                        end
                end
                wait(.1)
                for i,v in next, game.Players.LocalPlayer.Character:GetChildren() do
                        if v:IsA'Tool' then
                                table.insert(tools, v)
                        end
                end
                local currentTargets = {}
                for i, tool in next, tools do
                        tool.Handle.Massless = true
                        tool.Grip = CFrame.new()
                        tool.Grip = tool.Handle.CFrame:ToObjectSpace(players[i].Character.Head.CFrame):Inverse()
                end
                local players = {}
end)

AddCommand("bringall", function()
savedpos = kplr.Character:FindFirstChild("HumanoidRootPart").CFrame
cbringall = true
rhumanoid()
for _, tool in ipairs(game:GetService("Players").LocalPlayer.Backpack:GetChildren()) do
if tool:IsA("Tool") then
tool.Parent = game:GetService("Players").LocalPlayer.Character
end
end
wait(3)
cbringall = false
kplr.CharacterAdded:Wait():WaitForChild("HumanoidRootPart").CFrame = savedpos
end)

AddCommand("dex", function()
loadstring(game:HttpGet("https://cdn.wearedevs.net/scripts/Dex%20Explorer.txt"))()
end)

AddCommand("explorer", function()
loadstring(game:HttpGet("https://cdn.wearedevs.net/scripts/Dex%20Explorer.txt"))()
end)

AddCommand("voidall", function()
savedpos = kplr.Character:FindFirstChild("HumanoidRootPart").CFrame
cbringall = true
rhumanoid()
for _, tool in ipairs(game:GetService("Players").LocalPlayer.Backpack:GetChildren()) do
if tool:IsA("Tool") then
tool.Parent = game:GetService("Players").LocalPlayer.Character
end
end
wait(3)
cbringall = false
kplr.Character.HumanoidRootPart.CFrame = CFrame.new(9e9,9e9,9e9)
kplr.CharacterAdded:Wait():WaitForChild("HumanoidRootPart").CFrame = savedpos
end)

AddCommand("bkillall", function()
savedpos = kplr.Character:FindFirstChild("HumanoidRootPart").CFrame
cbringall = true
rhumanoid()
for _, tool in ipairs(game:GetService("Players").LocalPlayer.Backpack:GetChildren()) do
if tool:IsA("Tool") then
tool.Parent = game:GetService("Players").LocalPlayer.Character
end
end
wait(3)
cbringall = false
kplr.Character.Humanoid.Health = 0
kplr.Character = nil
kplr.CharacterAdded:Wait():WaitForChild("HumanoidRootPart").CFrame = savedpos
end)

AddCommand("cmds", function()
       cmdsgui.Enabled = true
end)

AddCommand("to", function()
for _, Target in pairs(GetPlayer(args[2])) do
local Player = game.Players:FindFirstChild(Target.Name)
if Player.Character ~= nil then
if kplr.Character:FindFirstChildOfClass('Humanoid') and kplr.Character:FindFirstChildOfClass('Humanoid').SeatPart then				kplr.Character:FindFirstChildOfClass('Humanoid').Sit = false
wait(.1)
end
kplr.Character.HumanoidRootPart.CFrame = Player.Character.Head.CFrame
end
end
end)

AddCommand("keepbar", function()
if not Settings.keepbar then
Settings.keepbar = true
cmdbar.Enabled = true
Save()
else
Notify("Already Enabled!")
end
end)

AddCommand("dupetools", function()
for i=1,args[2] do 
           
local block = Instance.new("Part")
local bp = Instance.new("BodyPosition")
block.CFrame = CFrame.new(9e9,9e9,9e9)
block.Anchored = true
local player = game.Players.LocalPlayer
local character = player.Character
local savepos = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
for i,v in pairs(player.Backpack:GetChildren()) do
   game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = block.CFrame
v.Parent = Character bp.Parent = v.Handle bp.Position = block.Position v.Handle.Velocity = Vector3.new(25.70,0,0) v.Handle.RotVelocity = Vector3.new(9e9,9e9,9e9)  v.Parent = game.Players.LocalPlayer.Backpack wait(1)   v.Parent = character task.wait(0)   v.Parent = workspace 
end
character:ClearAllChildren()
wait(7)
for i,v in pairs(game.workspace:GetDescendants()) do 
       if v:IsA("Tool") and v:FindFirstChild("Handle") then
           v.Handle.CanCollide = false
           bp:Destroy()
           v.Handle.RotVelocity = Vector3.new(0,0,0)
           game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = savepos
           v.Handle.CFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
           block:Destroy()
       end
     
end
end
end)

AddCommand("bring", function()
for _, Target in pairs(GetPlayer(args[2])) do
local Player = game.Players:FindFirstChild(Target.Name)
savedpos = kplr.Character:FindFirstChild("HumanoidRootPart").CFrame
rhumanoid()
for i,v in pairs(game:GetService'Players'.LocalPlayer.Backpack:GetChildren()) do
kplr.Character.Humanoid:EquipTool(v)
end
local Tool = kplr.Character:FindFirstChildOfClass("Tool")
repeat wait()
Target.Character.HumanoidRootPart.CFrame = kplr.Character.HumanoidRootPart.CFrame
until Tool.Parent ~= kplr.Character
kplr.Character.Humanoid.Health = 0
kplr.Character = nil
kplr.CharacterAdded:Wait():WaitForChild("HumanoidRootPart").CFrame = savedpos
end
end)

AddCommand("respawn", function()
       respawn(kplr)
end)

AddCommand("re", function()
       refresh(kplr)
end)

AddCommand("refresh", function()
       refresh(kplr)
end)

AddCommand("walkspeed", function()
if args[2] then
local speed = args[2]
if isNumber(speed) then
kplr.Character:FindFirstChildOfClass('Humanoid').WalkSpeed = speed
end
end
end)

AddCommand("flygui", function()
loadstring(game:HttpGet("https://gist.githubusercontent.com/meozoneYT/bf037dff9f0a70017304ddd67fdcd370/raw/e14e74f425b060df523343cf30b787074eb3c5d2/arceus%2520x%2520fly%25202%2520obflucator"))()
end)

local Noclipping = nil
AddCommand("noclip", function()
Clip = false
wait(0.1)
local function NoclipLoop()
if Clip == false and kplr.Character ~= nil then
for _, child in pairs(kplr.Character:GetDescendants()) do
if child:IsA("BasePart") and child.CanCollide == true and child.Name ~= floatName then
child.CanCollide = false
end
end
end
end
Noclipping = RunService.Stepped:Connect(NoclipLoop)
end)

AddCommand("clip", function()
if Noclipping then
Noclipping:Disconnect()
end
Clip = true
end)

flinging = false
AddCommand("fling", function()
flinging = false
for _, child in pairs(kplr.Character:GetDescendants()) do
if child:IsA("BasePart") then
child.CustomPhysicalProperties = PhysicalProperties.new(math.huge, 0.3, 0.5)
end
end
runCmd("noclip")
wait(.1)
wait(.1)
local bambam = Instance.new("BodyAngularVelocity")
bambam.Name = "0"
bambam.Parent = getRoot(kplr.Character)
bambam.AngularVelocity = Vector3.new(0,99999,0)
bambam.MaxTorque = Vector3.new(0,math.huge,0)
bambam.P = math.huge
local Char = kplr.Character:GetChildren()
for i, v in next, Char do
if v:IsA("BasePart") then
v.CanCollide = false
v.Massless = true
v.Velocity = Vector3.new(0, 0, 0)
end
end
flinging = true
local function flingDiedF()
runCmd("unfling")
end
flingDied = kplr.Character:FindFirstChildOfClass('Humanoid').Died:Connect(flingDiedF)
repeat
bambam.AngularVelocity = Vector3.new(0,99999,0)
wait(.2)
bambam.AngularVelocity = Vector3.new(0,0,0)
wait(.1)
until flinging == false
end)


AddCommand("unfling", function()
runCmd("clip")
if flingDied then
flingDied:Disconnect()
end
flinging = false
wait(.1)
local speakerChar = kplr.Character
if not speakerChar or not getRoot(speakerChar) then return end
for i,v in pairs(getRoot(speakerChar):GetChildren()) do
if v.ClassName == 'BodyAngularVelocity' then
v:Destroy()
end
end
for _, child in pairs(speakerChar:GetDescendants()) do
if child.ClassName == "Part" or child.ClassName == "MeshPart" then
child.CustomPhysicalProperties = PhysicalProperties.new(0.7, 0.3, 0.5)
end
end
end)

AddCommand("savepos", function()
       savedpos = kplr.Character:FindFirstChild("HumanoidRootPart").CFrame
end)

AddCommand("loadpos", function()
kplr.Character:FindFirstChild("HumanoidRootPart").CFrame = savepos
end)

if Settings.keepbar then
cmdbar.Enabled = true
end


Notify("Krunox V12 Loaded")
Notify("Press Qoute For CMDBAR")
Notify("Chat or type in cmdbar 'cmds' for list of commands")
while true do
for i = 1, 360 do
thearrow.TextColor3 = Color3.fromHSV(i / 360, 1, 1)
task.wait()
end
end
